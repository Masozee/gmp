(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[361],{10239:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>h});var a=r(95155),s=r(12115),n=r(35695),l=r(12543),i=r(75943),d=r(77223),o=r(17607),c=r(30285),u=r(66695),f=r(26126),m=r(91394),p=r(22346),x=r(90010);function h(e){let{params:t}=e,r=(0,n.useRouter)(),[h,v]=(0,s.useState)(null),[N,g]=(0,s.useState)(!0),[y,j]=(0,s.useState)(null),b=s.use(t).id,w={DRAFT:{label:"Draft",variant:"secondary"},PUBLISHED:{label:"Published",variant:"default"},ARCHIVED:{label:"Archived",variant:"outline"}};(0,s.useEffect)(()=>{(async()=>{try{g(!0);let e=await fetch("/api/publications/".concat(b));if(!e.ok)throw Error("Failed to fetch publication");let t=await e.json();v(t)}catch(e){console.error("Error fetching publication:",e),j("Failed to load publication. Please try again.")}finally{g(!1)}})()},[b]);let R=async()=>{try{if(!(await fetch("/api/publications/".concat(b),{method:"DELETE"})).ok)throw Error("Failed to delete publication");r.push("/dashboard/publications")}catch(e){console.error("Error deleting publication:",e),j("Failed to delete publication. Please try again.")}};return N?(0,a.jsx)("div",{className:"flex items-center justify-center h-screen",children:(0,a.jsx)("p",{className:"text-muted-foreground",children:"Loading publication..."})}):y||!h?(0,a.jsxs)("div",{className:"flex flex-col items-center justify-center h-screen gap-4",children:[(0,a.jsx)("p",{className:"text-destructive",children:y||"Publication not found"}),(0,a.jsxs)(c.$,{variant:"outline",onClick:()=>r.push("/dashboard/publications"),children:[(0,a.jsx)(l.A,{className:"mr-2 h-4 w-4"}),"Back to Publications"]})]}):(0,a.jsxs)("div",{className:"flex flex-col gap-8 p-8",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)(c.$,{variant:"outline",onClick:()=>r.push("/dashboard/publications"),children:[(0,a.jsx)(l.A,{className:"mr-2 h-4 w-4"}),"Back to Publications"]}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsxs)(c.$,{variant:"outline",onClick:()=>r.push("/dashboard/publications/".concat(b,"/edit")),children:[(0,a.jsx)(i.A,{className:"mr-2 h-4 w-4"}),"Edit"]}),(0,a.jsxs)(x.Lt,{children:[(0,a.jsx)(x.tv,{asChild:!0,children:(0,a.jsxs)(c.$,{variant:"destructive",children:[(0,a.jsx)(d.A,{className:"mr-2 h-4 w-4"}),"Delete"]})}),(0,a.jsxs)(x.EO,{children:[(0,a.jsxs)(x.wd,{children:[(0,a.jsx)(x.r7,{children:"Are you sure?"}),(0,a.jsx)(x.$v,{children:"This action cannot be undone. This will permanently delete the publication and all its associated data."})]}),(0,a.jsxs)(x.ck,{children:[(0,a.jsx)(x.Zr,{children:"Cancel"}),(0,a.jsx)(x.Rx,{onClick:R,children:"Delete"})]})]})]})]})]}),(0,a.jsxs)(u.Zp,{children:[(0,a.jsx)(u.aR,{children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsx)(u.ZB,{children:h.title}),(0,a.jsx)(u.BT,{children:h.description})]}),(0,a.jsx)(f.E,{variant:w[h.status].variant,children:w[h.status].label})]})}),(0,a.jsxs)(u.Wu,{className:"space-y-6",children:[h.coverImage&&(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("img",{src:h.coverImage,alt:h.title,className:"w-full rounded-lg object-cover max-h-[400px]"}),h.coverCredit&&(0,a.jsxs)("p",{className:"text-sm text-muted-foreground text-right",children:["Photo credit: ",h.coverCredit]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold",children:"Authors"}),(0,a.jsx)("div",{className:"flex flex-wrap gap-4",children:h.authors.map((e,t)=>(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsxs)(m.eu,{children:[(0,a.jsx)(m.BK,{src:e.profile.photoUrl||"",alt:"".concat(e.profile.firstName," ").concat(e.profile.lastName)}),(0,a.jsxs)(m.q5,{children:[e.profile.firstName[0],e.profile.lastName[0]]})]}),(0,a.jsxs)("span",{children:[e.profile.firstName," ",e.profile.lastName]})]},t))})]}),(0,a.jsx)(p.w,{}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold",children:"Content"}),(0,a.jsx)("div",{className:"prose max-w-none",children:h.content.split("\n").map((e,t)=>(0,a.jsx)("p",{children:e},t))})]}),h.files.length>0&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(p.w,{}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold",children:"Attachments"}),(0,a.jsx)("div",{className:"grid gap-2",children:h.files.map((e,t)=>(0,a.jsxs)("a",{href:e.url,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-2 p-2 rounded-lg border hover:bg-muted",children:[(0,a.jsx)(o.A,{className:"h-4 w-4"}),(0,a.jsx)("span",{children:e.name}),(0,a.jsxs)("span",{className:"text-sm text-muted-foreground",children:["(",Math.round(e.size/1024),"KB)"]})]},t))})]})]}),(0,a.jsx)(p.w,{}),(0,a.jsxs)("div",{className:"flex justify-between text-sm text-muted-foreground",children:[(0,a.jsxs)("span",{children:["Created: ",new Date(h.createdAt).toLocaleString()]}),(0,a.jsxs)("span",{children:["Updated: ",new Date(h.updatedAt).toLocaleString()]})]})]})]})]})}},12543:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});let a=(0,r(40157).A)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},17607:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});let a=(0,r(40157).A)("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},22346:(e,t,r)=>{"use strict";r.d(t,{w:()=>i});var a=r(95155),s=r(12115),n=r(87489),l=r(59434);let i=s.forwardRef((e,t)=>{let{className:r,orientation:s="horizontal",decorative:i=!0,...d}=e;return(0,a.jsx)(n.b,{ref:t,decorative:i,orientation:s,className:(0,l.cn)("shrink-0 bg-border","horizontal"===s?"h-[1px] w-full":"h-full w-[1px]",r),...d})});i.displayName=n.b.displayName},26126:(e,t,r)=>{"use strict";r.d(t,{E:()=>i});var a=r(95155);r(12115);var s=r(74466),n=r(59434);let l=(0,s.F)("inline-flex items-center rounded-md border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground shadow hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground shadow hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function i(e){let{className:t,variant:r,...s}=e;return(0,a.jsx)("div",{className:(0,n.cn)(l({variant:r}),t),...s})}},28905:(e,t,r)=>{"use strict";r.d(t,{C:()=>l});var a=r(12115),s=r(6101),n=r(52712),l=e=>{let{present:t,children:r}=e,l=function(e){var t,r;let[s,l]=a.useState(),d=a.useRef({}),o=a.useRef(e),c=a.useRef("none"),[u,f]=(t=e?"mounted":"unmounted",r={mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}},a.useReducer((e,t)=>{let a=r[e][t];return null!=a?a:e},t));return a.useEffect(()=>{let e=i(d.current);c.current="mounted"===u?e:"none"},[u]),(0,n.N)(()=>{let t=d.current,r=o.current;if(r!==e){let a=c.current,s=i(t);e?f("MOUNT"):"none"===s||(null==t?void 0:t.display)==="none"?f("UNMOUNT"):r&&a!==s?f("ANIMATION_OUT"):f("UNMOUNT"),o.current=e}},[e,f]),(0,n.N)(()=>{if(s){var e;let t,r=null!=(e=s.ownerDocument.defaultView)?e:window,a=e=>{let a=i(d.current).includes(e.animationName);if(e.target===s&&a&&(f("ANIMATION_END"),!o.current)){let e=s.style.animationFillMode;s.style.animationFillMode="forwards",t=r.setTimeout(()=>{"forwards"===s.style.animationFillMode&&(s.style.animationFillMode=e)})}},n=e=>{e.target===s&&(c.current=i(d.current))};return s.addEventListener("animationstart",n),s.addEventListener("animationcancel",a),s.addEventListener("animationend",a),()=>{r.clearTimeout(t),s.removeEventListener("animationstart",n),s.removeEventListener("animationcancel",a),s.removeEventListener("animationend",a)}}f("ANIMATION_END")},[s,f]),{isPresent:["mounted","unmountSuspended"].includes(u),ref:a.useCallback(e=>{e&&(d.current=getComputedStyle(e)),l(e)},[])}}(t),d="function"==typeof r?r({present:l.isPresent}):a.Children.only(r),o=(0,s.s)(l.ref,function(e){var t,r;let a=null==(t=Object.getOwnPropertyDescriptor(e.props,"ref"))?void 0:t.get,s=a&&"isReactWarning"in a&&a.isReactWarning;return s?e.ref:(s=(a=null==(r=Object.getOwnPropertyDescriptor(e,"ref"))?void 0:r.get)&&"isReactWarning"in a&&a.isReactWarning)?e.props.ref:e.props.ref||e.ref}(d));return"function"==typeof r||l.isPresent?a.cloneElement(d,{ref:o}):null};function i(e){return(null==e?void 0:e.animationName)||"none"}l.displayName="Presence"},30285:(e,t,r)=>{"use strict";r.d(t,{$:()=>o,r:()=>d});var a=r(95155),s=r(12115),n=r(99708),l=r(74466),i=r(59434);let d=(0,l.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground shadow hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",outline:"border border-input bg-background shadow-sm hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),o=s.forwardRef((e,t)=>{let{className:r,variant:s,size:l,asChild:o=!1,...c}=e,u=o?n.DX:"button";return(0,a.jsx)(u,{className:(0,i.cn)(d({variant:s,size:l,className:r})),ref:t,...c})});o.displayName="Button"},35695:(e,t,r)=>{"use strict";var a=r(18999);r.o(a,"usePathname")&&r.d(t,{usePathname:function(){return a.usePathname}}),r.o(a,"useRouter")&&r.d(t,{useRouter:function(){return a.useRouter}}),r.o(a,"useSearchParams")&&r.d(t,{useSearchParams:function(){return a.useSearchParams}})},44955:(e,t,r)=>{Promise.resolve().then(r.bind(r,10239))},59434:(e,t,r)=>{"use strict";r.d(t,{cn:()=>n});var a=r(52596),s=r(39688);function n(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,s.QP)((0,a.$)(t))}},66695:(e,t,r)=>{"use strict";r.d(t,{BT:()=>o,Wu:()=>c,ZB:()=>d,Zp:()=>l,aR:()=>i,wL:()=>u});var a=r(95155),s=r(12115),n=r(59434);let l=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("div",{ref:t,className:(0,n.cn)("rounded-xl border bg-card text-card-foreground shadow",r),...s})});l.displayName="Card";let i=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("div",{ref:t,className:(0,n.cn)("flex flex-col space-y-1.5 p-6",r),...s})});i.displayName="CardHeader";let d=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("div",{ref:t,className:(0,n.cn)("font-semibold leading-none tracking-tight",r),...s})});d.displayName="CardTitle";let o=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("div",{ref:t,className:(0,n.cn)("text-sm text-muted-foreground",r),...s})});o.displayName="CardDescription";let c=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("div",{ref:t,className:(0,n.cn)("p-6 pt-0",r),...s})});c.displayName="CardContent";let u=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("div",{ref:t,className:(0,n.cn)("flex items-center p-6 pt-0",r),...s})});u.displayName="CardFooter"},75943:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});let a=(0,r(40157).A)("Pencil",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]])},77223:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});let a=(0,r(40157).A)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]])},85977:(e,t,r)=>{"use strict";r.d(t,{H4:()=>w,_V:()=>b,bL:()=>j});var a=r(12115),s=r(46081),n=r(39033),l=r(52712),i=r(63655),d=r(95155),o="Avatar",[c,u]=(0,s.A)(o),[f,m]=c(o),p=a.forwardRef((e,t)=>{let{__scopeAvatar:r,...s}=e,[n,l]=a.useState("idle");return(0,d.jsx)(f,{scope:r,imageLoadingStatus:n,onImageLoadingStatusChange:l,children:(0,d.jsx)(i.sG.span,{...s,ref:t})})});p.displayName=o;var x="AvatarImage",h=a.forwardRef((e,t)=>{let{__scopeAvatar:r,src:s,onLoadingStatusChange:o=()=>{},...c}=e,u=m(x,r),f=function(e,t){let{referrerPolicy:r,crossOrigin:s}=t,n=a.useSyncExternalStore(y,()=>!0,()=>!1),i=a.useRef(null),d=n?(i.current||(i.current=new window.Image),i.current):null,[o,c]=a.useState(()=>g(d,e));return(0,l.N)(()=>{c(g(d,e))},[d,e]),(0,l.N)(()=>{let e=e=>()=>{c(e)};if(!d)return;let t=e("loaded"),a=e("error");return d.addEventListener("load",t),d.addEventListener("error",a),r&&(d.referrerPolicy=r),"string"==typeof s&&(d.crossOrigin=s),()=>{d.removeEventListener("load",t),d.removeEventListener("error",a)}},[d,s,r]),o}(s,c),p=(0,n.c)(e=>{o(e),u.onImageLoadingStatusChange(e)});return(0,l.N)(()=>{"idle"!==f&&p(f)},[f,p]),"loaded"===f?(0,d.jsx)(i.sG.img,{...c,ref:t,src:s}):null});h.displayName=x;var v="AvatarFallback",N=a.forwardRef((e,t)=>{let{__scopeAvatar:r,delayMs:s,...n}=e,l=m(v,r),[o,c]=a.useState(void 0===s);return a.useEffect(()=>{if(void 0!==s){let e=window.setTimeout(()=>c(!0),s);return()=>window.clearTimeout(e)}},[s]),o&&"loaded"!==l.imageLoadingStatus?(0,d.jsx)(i.sG.span,{...n,ref:t}):null});function g(e,t){return e?t?(e.src!==t&&(e.src=t),e.complete&&e.naturalWidth>0?"loaded":"loading"):"error":"idle"}function y(){return()=>{}}N.displayName=v;var j=p,b=h,w=N},87489:(e,t,r)=>{"use strict";r.d(t,{b:()=>o});var a=r(12115),s=r(63655),n=r(95155),l="horizontal",i=["horizontal","vertical"],d=a.forwardRef((e,t)=>{var r;let{decorative:a,orientation:d=l,...o}=e,c=(r=d,i.includes(r))?d:l;return(0,n.jsx)(s.sG.div,{"data-orientation":c,...a?{role:"none"}:{"aria-orientation":"vertical"===c?c:void 0,role:"separator"},...o,ref:t})});d.displayName="Separator";var o=d},90010:(e,t,r)=>{"use strict";r.d(t,{$v:()=>h,EO:()=>f,Lt:()=>d,Rx:()=>v,Zr:()=>N,ck:()=>p,r7:()=>x,tv:()=>o,wd:()=>m});var a=r(95155),s=r(12115),n=r(17649),l=r(59434),i=r(30285);let d=n.bL,o=n.l9,c=n.ZL,u=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)(n.hJ,{className:(0,l.cn)("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",r),...s,ref:t})});u.displayName=n.hJ.displayName;let f=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsxs)(c,{children:[(0,a.jsx)(u,{}),(0,a.jsx)(n.UC,{ref:t,className:(0,l.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",r),...s})]})});f.displayName=n.UC.displayName;let m=e=>{let{className:t,...r}=e;return(0,a.jsx)("div",{className:(0,l.cn)("flex flex-col space-y-2 text-center sm:text-left",t),...r})};m.displayName="AlertDialogHeader";let p=e=>{let{className:t,...r}=e;return(0,a.jsx)("div",{className:(0,l.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...r})};p.displayName="AlertDialogFooter";let x=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)(n.hE,{ref:t,className:(0,l.cn)("text-lg font-semibold",r),...s})});x.displayName=n.hE.displayName;let h=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)(n.VY,{ref:t,className:(0,l.cn)("text-sm text-muted-foreground",r),...s})});h.displayName=n.VY.displayName;let v=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)(n.rc,{ref:t,className:(0,l.cn)((0,i.r)(),r),...s})});v.displayName=n.rc.displayName;let N=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)(n.ZD,{ref:t,className:(0,l.cn)((0,i.r)({variant:"outline"}),"mt-2 sm:mt-0",r),...s})});N.displayName=n.ZD.displayName},91394:(e,t,r)=>{"use strict";r.d(t,{BK:()=>d,eu:()=>i,q5:()=>o});var a=r(95155),s=r(12115),n=r(85977),l=r(59434);let i=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)(n.bL,{ref:t,className:(0,l.cn)("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",r),...s})});i.displayName=n.bL.displayName;let d=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)(n._V,{ref:t,className:(0,l.cn)("aspect-square h-full w-full",r),...s})});d.displayName=n._V.displayName;let o=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)(n.H4,{ref:t,className:(0,l.cn)("flex h-full w-full items-center justify-center rounded-full bg-muted",r),...s})});o.displayName=n.H4.displayName}},e=>{var t=t=>e(e.s=t);e.O(0,[9352,652,7649,8441,1684,7358],()=>t(44955)),_N_E=e.O()}]);
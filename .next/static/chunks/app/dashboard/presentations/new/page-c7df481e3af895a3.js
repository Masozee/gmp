(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1054],{25616:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>b});var s=r(95155),n=r(12115),a=r(35695),i=r(62177),l=r(90221),o=r(55594),d=r(30285),c=r(22346),h=r(88262),p=r(17759),x=r(59409),j=r(62523),u=r(88539),m=r(66695),v=r(12543),f=r(4913);let g=o.z.object({title:o.z.string().min(1,{message:"Title is required"}),abstract:o.z.string().optional(),speakerId:o.z.string().min(1,{message:"Speaker is required"}),eventId:o.z.string().optional(),videoUrl:o.z.string().url({message:"Must be a valid URL"}).optional().or(o.z.literal("")),duration:o.z.coerce.number().int().positive().optional(),startTime:o.z.string().optional(),endTime:o.z.string().optional()});function b(){let e=(0,a.useRouter)(),[t,r]=(0,n.useState)([]),[o,b]=(0,n.useState)([]),[w,y]=(0,n.useState)(!1),[k,C]=(0,n.useState)(!1),[I,z]=(0,n.useState)(null),R=(0,i.mN)({resolver:(0,l.u)(g),defaultValues:{title:"",abstract:"",speakerId:"",eventId:"",videoUrl:"",duration:void 0,startTime:"",endTime:""}});(0,n.useEffect)(()=>{(async()=>{y(!0);try{let e=await fetch("/api/speakers");if(!e.ok)throw Error("Failed to fetch speakers");let t=await e.json();r(t.speakers||[]);let s=await fetch("/api/events");if(!s.ok)throw Error("Failed to fetch events");let n=await s.json();b(n.events||[])}catch(e){console.error("Error fetching data:",e),(0,h.o)({title:"Error",description:"Failed to load data. Please try again.",variant:"destructive"})}finally{y(!1)}})()},[]);let N=async t=>{C(!0);try{let r=new FormData;r.append("title",t.title),t.abstract&&r.append("abstract",t.abstract),r.append("speakerId",t.speakerId),t.eventId&&r.append("eventId",t.eventId),t.videoUrl&&r.append("videoUrl",t.videoUrl),t.duration&&r.append("duration",String(t.duration)),t.startTime&&r.append("startTime",t.startTime),t.endTime&&r.append("endTime",t.endTime),I&&r.append("slides",I);let s=await fetch("/api/presentations",{method:"POST",body:r});if(!s.ok){let e=await s.json();throw Error(e.error||"Failed to create presentation")}(0,h.o)({title:"Success",description:"Presentation created successfully"}),e.push("/dashboard/presentations")}catch(e){console.error("Error creating presentation:",e),(0,h.o)({title:"Error",description:e instanceof Error?e.message:"Failed to create presentation",variant:"destructive"})}finally{C(!1)}};return(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"space-y-1",children:[(0,s.jsx)("h1",{className:"text-3xl font-bold tracking-tight",children:"Create Presentation"}),(0,s.jsx)("p",{className:"text-muted-foreground",children:"Add a new presentation to the system"})]}),(0,s.jsxs)(d.$,{variant:"outline",onClick:()=>e.back(),children:[(0,s.jsx)(v.A,{className:"mr-2 h-4 w-4"}),"Back"]})]}),(0,s.jsx)(c.w,{}),(0,s.jsxs)(m.Zp,{children:[(0,s.jsxs)(m.aR,{children:[(0,s.jsx)(m.ZB,{children:"Presentation Details"}),(0,s.jsx)(m.BT,{children:"Fill in the details of the presentation"})]}),(0,s.jsx)(m.Wu,{children:(0,s.jsx)(p.lV,{...R,children:(0,s.jsxs)("form",{onSubmit:R.handleSubmit(N),className:"space-y-6",children:[(0,s.jsxs)("div",{className:"grid grid-cols-1 gap-6 md:grid-cols-2",children:[(0,s.jsx)(p.zB,{control:R.control,name:"title",render:e=>{let{field:t}=e;return(0,s.jsxs)(p.eI,{children:[(0,s.jsx)(p.lR,{children:"Title"}),(0,s.jsx)(p.MJ,{children:(0,s.jsx)(j.p,{placeholder:"Presentation title",...t})}),(0,s.jsx)(p.C5,{})]})}}),(0,s.jsx)(p.zB,{control:R.control,name:"speakerId",render:e=>{let{field:r}=e;return(0,s.jsxs)(p.eI,{children:[(0,s.jsx)(p.lR,{children:"Speaker"}),(0,s.jsxs)(x.l6,{onValueChange:r.onChange,defaultValue:r.value,disabled:w,children:[(0,s.jsx)(p.MJ,{children:(0,s.jsx)(x.bq,{children:(0,s.jsx)(x.yv,{placeholder:"Select a speaker"})})}),(0,s.jsx)(x.gC,{children:t.map(e=>(0,s.jsxs)(x.eb,{value:e.id,children:[e.firstName," ",e.lastName,e.organization&&" (".concat(e.organization,")")]},e.id))})]}),(0,s.jsx)(p.C5,{})]})}}),(0,s.jsx)(p.zB,{control:R.control,name:"eventId",render:e=>{let{field:t}=e;return(0,s.jsxs)(p.eI,{children:[(0,s.jsx)(p.lR,{children:"Event (Optional)"}),(0,s.jsxs)(x.l6,{onValueChange:t.onChange,defaultValue:t.value,disabled:w,children:[(0,s.jsx)(p.MJ,{children:(0,s.jsx)(x.bq,{children:(0,s.jsx)(x.yv,{placeholder:"Select an event (optional)"})})}),(0,s.jsxs)(x.gC,{children:[(0,s.jsx)(x.eb,{value:"",children:"None"}),o.map(e=>(0,s.jsx)(x.eb,{value:e.id,children:e.title},e.id))]})]}),(0,s.jsx)(p.Rr,{children:"Associate this presentation with an event"}),(0,s.jsx)(p.C5,{})]})}}),(0,s.jsx)(p.zB,{control:R.control,name:"duration",render:e=>{let{field:t}=e;return(0,s.jsxs)(p.eI,{children:[(0,s.jsx)(p.lR,{children:"Duration (minutes)"}),(0,s.jsx)(p.MJ,{children:(0,s.jsx)(j.p,{type:"number",placeholder:"Duration in minutes",...t,value:t.value||"",onChange:e=>{let r=""===e.target.value?void 0:parseInt(e.target.value);t.onChange(r)}})}),(0,s.jsx)(p.Rr,{children:"How long is the presentation"}),(0,s.jsx)(p.C5,{})]})}}),(0,s.jsx)(p.zB,{control:R.control,name:"startTime",render:e=>{let{field:t}=e;return(0,s.jsxs)(p.eI,{children:[(0,s.jsx)(p.lR,{children:"Start Time"}),(0,s.jsx)(p.MJ,{children:(0,s.jsx)(j.p,{type:"datetime-local",...t})}),(0,s.jsx)(p.Rr,{children:"When does the presentation start"}),(0,s.jsx)(p.C5,{})]})}}),(0,s.jsx)(p.zB,{control:R.control,name:"endTime",render:e=>{let{field:t}=e;return(0,s.jsxs)(p.eI,{children:[(0,s.jsx)(p.lR,{children:"End Time"}),(0,s.jsx)(p.MJ,{children:(0,s.jsx)(j.p,{type:"datetime-local",...t})}),(0,s.jsx)(p.Rr,{children:"When does the presentation end"}),(0,s.jsx)(p.C5,{})]})}}),(0,s.jsx)(p.zB,{control:R.control,name:"videoUrl",render:e=>{let{field:t}=e;return(0,s.jsxs)(p.eI,{children:[(0,s.jsx)(p.lR,{children:"Video URL"}),(0,s.jsx)(p.MJ,{children:(0,s.jsx)(j.p,{placeholder:"https://www.youtube.com/watch?v=...",...t})}),(0,s.jsx)(p.Rr,{children:"Link to a recorded video of the presentation"}),(0,s.jsx)(p.C5,{})]})}}),(0,s.jsx)("div",{children:(0,s.jsxs)(p.eI,{children:[(0,s.jsx)(p.lR,{children:"Slides"}),(0,s.jsx)(p.MJ,{children:(0,s.jsx)(j.p,{type:"file",accept:".pdf,.ppt,.pptx,.key",onChange:e=>{e.target.files&&e.target.files[0]&&z(e.target.files[0])}})}),(0,s.jsx)(p.Rr,{children:"Upload presentation slides (PDF, PowerPoint, Keynote)"})]})})]}),(0,s.jsx)(p.zB,{control:R.control,name:"abstract",render:e=>{let{field:t}=e;return(0,s.jsxs)(p.eI,{children:[(0,s.jsx)(p.lR,{children:"Abstract"}),(0,s.jsx)(p.MJ,{children:(0,s.jsx)(u.T,{placeholder:"Write a summary of the presentation...",className:"min-h-[120px]",...t})}),(0,s.jsx)(p.Rr,{children:"A brief description of what the presentation is about"}),(0,s.jsx)(p.C5,{})]})}}),(0,s.jsx)(m.wL,{className:"flex justify-end px-0 pb-0",children:(0,s.jsxs)(d.$,{type:"submit",disabled:k,className:"w-full md:w-auto",children:[k&&(0,s.jsx)(f.A,{className:"mr-2 h-4 w-4 animate-spin"}),"Create Presentation"]})})]})})})]})]})}},60644:(e,t,r)=>{Promise.resolve().then(r.bind(r,25616))}},e=>{var t=t=>e(e.s=t);e.O(0,[9352,652,9764,5521,1859,6671,7721,8441,1684,7358],()=>t(60644)),_N_E=e.O()}]);
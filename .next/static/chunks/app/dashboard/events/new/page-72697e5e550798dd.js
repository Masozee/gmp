(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1062],{4313:(e,t,s)=>{"use strict";s.d(t,{K:()=>c});var r=s(95155),a=s(12115),n=s(25318),l=s(26126),i=s(17972),o=s(77740);function c(e){let{options:t,placeholder:s="Select options",selected:c,onChange:d,className:h}=e,x=a.useRef(null),[j,u]=a.useState(!1),[m,p]=a.useState(""),f=e=>{d(c.filter(t=>t!==e))},g=t.filter(e=>!c.includes(e.value));return(0,r.jsxs)(i.uB,{onKeyDown:e=>{let t=x.current;t&&(("Delete"===e.key||"Backspace"===e.key)&&""===t.value&&c.length>0&&d(c.slice(0,-1)),"Escape"===e.key&&(t.blur(),u(!1)))},className:"overflow-visible bg-transparent ".concat(h),children:[(0,r.jsx)("div",{className:"group rounded-md border border-input px-3 py-2 text-sm ring-offset-background focus-within:ring-2 focus-within:ring-ring focus-within:ring-offset-2",children:(0,r.jsxs)("div",{className:"flex flex-wrap gap-1",children:[c.map(e=>{let s=t.find(t=>t.value===e);return(0,r.jsxs)(l.E,{variant:"secondary",children:[null==s?void 0:s.label,(0,r.jsx)("button",{className:"ml-1 rounded-full outline-none ring-offset-background focus:ring-2 focus:ring-ring focus:ring-offset-2",onKeyDown:t=>{"Enter"===t.key&&f(e)},onMouseDown:e=>{e.preventDefault(),e.stopPropagation()},onClick:()=>f(e),children:(0,r.jsx)(n.A,{className:"h-3 w-3 text-muted-foreground hover:text-foreground"})})]},e)}),(0,r.jsx)(o.uB.Input,{ref:x,value:m,onValueChange:p,onBlur:()=>u(!1),onFocus:()=>u(!0),placeholder:0===c.length?s:void 0,className:"ml-2 flex-1 bg-transparent outline-none placeholder:text-muted-foreground"})]})}),(0,r.jsx)("div",{className:"relative",children:j&&g.length>0?(0,r.jsx)("div",{className:"absolute top-0 z-10 w-full rounded-md border bg-popover text-popover-foreground shadow-md outline-none animate-in",children:(0,r.jsx)(i.L$,{className:"h-full overflow-auto",children:g.map(e=>(0,r.jsx)(i.h_,{onMouseDown:e=>{e.preventDefault(),e.stopPropagation()},onSelect:()=>{p(""),d([...c,e.value])},className:"cursor-pointer",children:e.label},e.value))})}):null})]})}},10140:(e,t,s)=>{Promise.resolve().then(s.bind(s,44804))},22346:(e,t,s)=>{"use strict";s.d(t,{w:()=>i});var r=s(95155),a=s(12115),n=s(87489),l=s(59434);let i=a.forwardRef((e,t)=>{let{className:s,orientation:a="horizontal",decorative:i=!0,...o}=e;return(0,r.jsx)(n.b,{ref:t,decorative:i,orientation:a,className:(0,l.cn)("shrink-0 bg-border","horizontal"===a?"h-[1px] w-full":"h-full w-[1px]",s),...o})});i.displayName=n.b.displayName},44804:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>R});var r=s(95155),a=s(12115),n=s(35695),l=s(6874),i=s.n(l),o=s(12543),c=s(50172),d=s(51920),h=s(62177),x=s(90221),j=s(55594),u=s(83013),m=s(35476),p=s(92084),f=s(41876),g=s(30285),v=s(66695),N=s(62523),w=s(88539),C=s(17759),y=s(59409),b=s(22346),D=s(4313);let k=j.Ik({title:j.Yj().min(3,"Title must be at least 3 characters"),description:j.Yj().min(10,"Description must be at least 10 characters"),content:j.Yj().optional(),location:j.Yj().min(3,"Location must be at least 3 characters"),startDate:j.Yj().refine(e=>!isNaN(Date.parse(e)),{message:"Please enter a valid start date"}),endDate:j.Yj().refine(e=>!isNaN(Date.parse(e)),{message:"Please enter a valid end date"}),status:j.k5(["UPCOMING","ONGOING","COMPLETED","CANCELLED"]),categoryId:j.Yj().min(1,"Please select a category"),imageUrl:j.Yj().url("Please enter a valid URL").optional().or(j.eu("")),posterCredit:j.Yj().optional(),tags:j.YO(j.Yj()).optional(),speakers:j.YO(j.Yj()).optional()}).refine(e=>{let t=new Date(e.startDate);return new Date(e.endDate)>=t},{message:"End date must be after start date",path:["endDate"]});function E(){let e=(0,n.useRouter)(),t=(0,n.useSearchParams)(),[s,l]=(0,a.useState)([]),[j,E]=(0,a.useState)([]),[R,S]=(0,a.useState)([]),[B,I]=(0,a.useState)(!1),M=t.get("date"),O=e=>(0,u.GP)(e,"yyyy-MM-dd'T'HH:mm"),T=(()=>{if(M){let e=new Date(M);if(!isNaN(e.getTime()))return{startDate:O(e),endDate:O(function(e,t){var s=2*f.s0;let r=+(0,m.a)(e);return(0,p.w)(e,r+s)}(e,0))}}return{startDate:"",endDate:""}})(),z=(0,h.mN)({resolver:(0,x.u)(k),defaultValues:{title:"",description:"",content:"",location:"",startDate:T.startDate,endDate:T.endDate,status:"UPCOMING",categoryId:"",imageUrl:"",posterCredit:"",tags:[],speakers:[]}});(0,a.useEffect)(()=>{let e=async()=>{try{let e=await fetch("/api/tags");if(!e.ok)throw Error("Failed to fetch tags");let t=await e.json();E(t)}catch(e){console.error("Error fetching tags:",e)}},t=async()=>{try{let e=await fetch("/api/speakers");if(!e.ok)throw Error("Failed to fetch speakers");let t=await e.json();S(t)}catch(e){console.error("Error fetching speakers:",e)}};(async()=>{try{let e=await fetch("/api/event-categories");if(!e.ok)throw Error("Failed to fetch categories");let t=await e.json();l(t)}catch(e){console.error("Error fetching categories:",e)}})(),e(),t()},[]);let P=async t=>{try{I(!0);let s=await fetch("/api/events",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!s.ok){let e=await s.json();throw Error(e.error||"Failed to create event")}let r=await s.json();e.push("/dashboard/events/".concat(r.id))}catch(e){console.error("Error creating event:",e),I(!1)}};return(0,r.jsxs)("div",{className:"container mx-auto py-6",children:[(0,r.jsx)("div",{className:"flex items-center mb-6",children:(0,r.jsx)(g.$,{variant:"ghost",size:"sm",asChild:!0,children:(0,r.jsxs)(i(),{href:"/dashboard/events",children:[(0,r.jsx)(o.A,{className:"mr-2 h-4 w-4"}),"Back to Events"]})})}),(0,r.jsxs)("div",{className:"grid gap-6 md:grid-cols-7",children:[(0,r.jsxs)(v.Zp,{className:"md:col-span-5",children:[(0,r.jsxs)(v.aR,{children:[(0,r.jsx)(v.ZB,{children:"Create New Event"}),(0,r.jsx)(v.BT,{children:"Fill in the details to create a new event"})]}),(0,r.jsx)(v.Wu,{children:(0,r.jsx)(C.lV,{...z,children:(0,r.jsxs)("form",{onSubmit:z.handleSubmit(P),className:"space-y-6",children:[(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsx)(C.zB,{control:z.control,name:"title",render:e=>{let{field:t}=e;return(0,r.jsxs)(C.eI,{children:[(0,r.jsx)(C.lR,{children:"Title"}),(0,r.jsx)(C.MJ,{children:(0,r.jsx)(N.p,{placeholder:"Event title",...t})}),(0,r.jsx)(C.C5,{})]})}}),(0,r.jsx)(C.zB,{control:z.control,name:"description",render:e=>{let{field:t}=e;return(0,r.jsxs)(C.eI,{children:[(0,r.jsx)(C.lR,{children:"Description"}),(0,r.jsx)(C.MJ,{children:(0,r.jsx)(w.T,{placeholder:"Brief description of the event",className:"min-h-[100px]",...t})}),(0,r.jsx)(C.C5,{})]})}}),(0,r.jsx)(C.zB,{control:z.control,name:"content",render:e=>{let{field:t}=e;return(0,r.jsxs)(C.eI,{children:[(0,r.jsx)(C.lR,{children:"Content"}),(0,r.jsx)(C.MJ,{children:(0,r.jsx)(w.T,{placeholder:"Detailed content of the event (optional)",className:"min-h-[200px]",...t})}),(0,r.jsx)(C.Rr,{children:"You can use HTML for formatting"}),(0,r.jsx)(C.C5,{})]})}}),(0,r.jsxs)("div",{className:"grid gap-4 md:grid-cols-2",children:[(0,r.jsx)(C.zB,{control:z.control,name:"startDate",render:e=>{let{field:t}=e;return(0,r.jsxs)(C.eI,{children:[(0,r.jsx)(C.lR,{children:"Start Date"}),(0,r.jsx)(C.MJ,{children:(0,r.jsx)(N.p,{type:"datetime-local",...t})}),(0,r.jsx)(C.C5,{})]})}}),(0,r.jsx)(C.zB,{control:z.control,name:"endDate",render:e=>{let{field:t}=e;return(0,r.jsxs)(C.eI,{children:[(0,r.jsx)(C.lR,{children:"End Date"}),(0,r.jsx)(C.MJ,{children:(0,r.jsx)(N.p,{type:"datetime-local",...t})}),(0,r.jsx)(C.C5,{})]})}})]}),(0,r.jsx)(C.zB,{control:z.control,name:"location",render:e=>{let{field:t}=e;return(0,r.jsxs)(C.eI,{children:[(0,r.jsx)(C.lR,{children:"Location"}),(0,r.jsx)(C.MJ,{children:(0,r.jsx)(N.p,{placeholder:"Event location",...t})}),(0,r.jsx)(C.C5,{})]})}}),(0,r.jsxs)("div",{className:"grid gap-4 md:grid-cols-2",children:[(0,r.jsx)(C.zB,{control:z.control,name:"status",render:e=>{let{field:t}=e;return(0,r.jsxs)(C.eI,{children:[(0,r.jsx)(C.lR,{children:"Status"}),(0,r.jsxs)(y.l6,{onValueChange:t.onChange,defaultValue:t.value,children:[(0,r.jsx)(C.MJ,{children:(0,r.jsx)(y.bq,{children:(0,r.jsx)(y.yv,{placeholder:"Select status"})})}),(0,r.jsxs)(y.gC,{children:[(0,r.jsx)(y.eb,{value:"UPCOMING",children:"Upcoming"}),(0,r.jsx)(y.eb,{value:"ONGOING",children:"Ongoing"}),(0,r.jsx)(y.eb,{value:"COMPLETED",children:"Completed"}),(0,r.jsx)(y.eb,{value:"CANCELLED",children:"Cancelled"})]})]}),(0,r.jsx)(C.C5,{})]})}}),(0,r.jsx)(C.zB,{control:z.control,name:"categoryId",render:e=>{let{field:t}=e;return(0,r.jsxs)(C.eI,{children:[(0,r.jsx)(C.lR,{children:"Category"}),(0,r.jsxs)(y.l6,{onValueChange:t.onChange,defaultValue:t.value,children:[(0,r.jsx)(C.MJ,{children:(0,r.jsx)(y.bq,{children:(0,r.jsx)(y.yv,{placeholder:"Select category"})})}),(0,r.jsx)(y.gC,{children:s.map(e=>(0,r.jsx)(y.eb,{value:e.id,children:e.name},e.id))})]}),(0,r.jsx)(C.C5,{})]})}})]}),(0,r.jsxs)("div",{className:"grid gap-4 md:grid-cols-2",children:[(0,r.jsx)(C.zB,{control:z.control,name:"imageUrl",render:e=>{let{field:t}=e;return(0,r.jsxs)(C.eI,{children:[(0,r.jsx)(C.lR,{children:"Image URL"}),(0,r.jsx)(C.MJ,{children:(0,r.jsx)(N.p,{placeholder:"URL for event image",...t})}),(0,r.jsx)(C.Rr,{children:"Optional image for the event"}),(0,r.jsx)(C.C5,{})]})}}),(0,r.jsx)(C.zB,{control:z.control,name:"posterCredit",render:e=>{let{field:t}=e;return(0,r.jsxs)(C.eI,{children:[(0,r.jsx)(C.lR,{children:"Poster Credit"}),(0,r.jsx)(C.MJ,{children:(0,r.jsx)(N.p,{placeholder:"Credit for the event poster",...t})}),(0,r.jsx)(C.Rr,{children:"Optional credit for the event poster"}),(0,r.jsx)(C.C5,{})]})}})]}),(0,r.jsx)(b.w,{}),(0,r.jsx)(C.zB,{control:z.control,name:"tags",render:e=>{let{field:t}=e;return(0,r.jsxs)(C.eI,{children:[(0,r.jsx)(C.lR,{children:"Tags"}),(0,r.jsx)(C.MJ,{children:(0,r.jsx)(D.K,{options:j.map(e=>({label:e.name,value:e.id})),placeholder:"Select tags",selected:t.value||[],onChange:t.onChange})}),(0,r.jsx)(C.Rr,{children:"Select relevant tags for the event"}),(0,r.jsx)(C.C5,{})]})}}),(0,r.jsx)(C.zB,{control:z.control,name:"speakers",render:e=>{let{field:t}=e;return(0,r.jsxs)(C.eI,{children:[(0,r.jsx)(C.lR,{children:"Speakers"}),(0,r.jsx)(C.MJ,{children:(0,r.jsx)(D.K,{options:R.map(e=>({label:e.name,value:e.id})),placeholder:"Select speakers",selected:t.value||[],onChange:t.onChange})}),(0,r.jsx)(C.Rr,{children:"Select speakers for the event"}),(0,r.jsx)(C.C5,{})]})}})]}),(0,r.jsx)("div",{className:"flex justify-end",children:(0,r.jsxs)(g.$,{type:"submit",disabled:B,children:[B&&(0,r.jsx)(c.A,{className:"mr-2 h-4 w-4 animate-spin"}),"Create Event"]})})]})})})]}),(0,r.jsx)("div",{className:"md:col-span-2",children:(0,r.jsxs)(v.Zp,{children:[(0,r.jsx)(v.aR,{children:(0,r.jsx)(v.ZB,{children:"Event Creation Guide"})}),(0,r.jsxs)(v.Wu,{className:"space-y-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"font-medium mb-1",children:"Title & Description"}),(0,r.jsx)("p",{className:"text-sm text-muted-foreground",children:"Choose a clear, descriptive title and provide a concise description of your event."})]}),(0,r.jsx)(b.w,{}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"font-medium mb-1",children:"Date & Time"}),(0,r.jsx)("p",{className:"text-sm text-muted-foreground",children:"Set the start and end dates for your event. Make sure the end date is after the start date."})]}),(0,r.jsx)(b.w,{}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"font-medium mb-1",children:"Location"}),(0,r.jsx)("p",{className:"text-sm text-muted-foreground",children:"Specify where the event will take place. This can be a physical address or a virtual location."})]}),(0,r.jsx)(b.w,{}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"font-medium mb-1",children:"Categories & Tags"}),(0,r.jsx)("p",{className:"text-sm text-muted-foreground",children:"Select a category and add relevant tags to help people find your event."})]})]}),(0,r.jsx)(v.wL,{className:"flex justify-center",children:(0,r.jsx)(d.A,{className:"h-16 w-16 text-muted-foreground"})})]})})]})]})}function R(){return(0,r.jsx)(a.Suspense,{fallback:(0,r.jsxs)("div",{className:"container mx-auto py-6",children:[(0,r.jsx)("div",{className:"flex items-center mb-6",children:(0,r.jsx)(g.$,{variant:"ghost",size:"sm",asChild:!0,className:"mr-2",children:(0,r.jsxs)(i(),{href:"/dashboard/events",children:[(0,r.jsx)(o.A,{className:"h-4 w-4 mr-2"}),"Back to Events"]})})}),(0,r.jsxs)(v.Zp,{children:[(0,r.jsxs)(v.aR,{children:[(0,r.jsx)(v.ZB,{children:"Loading..."}),(0,r.jsx)(v.BT,{children:"Please wait while we load the form."})]}),(0,r.jsx)(v.Wu,{className:"flex justify-center py-10",children:(0,r.jsx)(c.A,{className:"h-8 w-8 animate-spin text-muted-foreground"})})]})]}),children:(0,r.jsx)(E,{})})}}},e=>{var t=t=>e(e.s=t);e.O(0,[9352,652,9764,6874,5521,1859,106,593,8396,5357,2721,8441,1684,7358],()=>t(10140)),_N_E=e.O()}]);
(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4520],{4313:(e,t,s)=>{"use strict";s.d(t,{K:()=>c});var r=s(95155),a=s(12115),n=s(25318),l=s(26126),i=s(17972),o=s(77740);function c(e){let{options:t,placeholder:s="Select options",selected:c,onChange:d,className:h}=e,x=a.useRef(null),[j,u]=a.useState(!1),[m,p]=a.useState(""),f=e=>{d(c.filter(t=>t!==e))},g=t.filter(e=>!c.includes(e.value));return(0,r.jsxs)(i.uB,{onKeyDown:e=>{let t=x.current;t&&(("Delete"===e.key||"Backspace"===e.key)&&""===t.value&&c.length>0&&d(c.slice(0,-1)),"Escape"===e.key&&(t.blur(),u(!1)))},className:"overflow-visible bg-transparent ".concat(h),children:[(0,r.jsx)("div",{className:"group rounded-md border border-input px-3 py-2 text-sm ring-offset-background focus-within:ring-2 focus-within:ring-ring focus-within:ring-offset-2",children:(0,r.jsxs)("div",{className:"flex flex-wrap gap-1",children:[c.map(e=>{let s=t.find(t=>t.value===e);return(0,r.jsxs)(l.E,{variant:"secondary",children:[null==s?void 0:s.label,(0,r.jsx)("button",{className:"ml-1 rounded-full outline-none ring-offset-background focus:ring-2 focus:ring-ring focus:ring-offset-2",onKeyDown:t=>{"Enter"===t.key&&f(e)},onMouseDown:e=>{e.preventDefault(),e.stopPropagation()},onClick:()=>f(e),children:(0,r.jsx)(n.A,{className:"h-3 w-3 text-muted-foreground hover:text-foreground"})})]},e)}),(0,r.jsx)(o.uB.Input,{ref:x,value:m,onValueChange:p,onBlur:()=>u(!1),onFocus:()=>u(!0),placeholder:0===c.length?s:void 0,className:"ml-2 flex-1 bg-transparent outline-none placeholder:text-muted-foreground"})]})}),(0,r.jsx)("div",{className:"relative",children:j&&g.length>0?(0,r.jsx)("div",{className:"absolute top-0 z-10 w-full rounded-md border bg-popover text-popover-foreground shadow-md outline-none animate-in",children:(0,r.jsx)(i.L$,{className:"h-full overflow-auto",children:g.map(e=>(0,r.jsx)(i.h_,{onMouseDown:e=>{e.preventDefault(),e.stopPropagation()},onSelect:()=>{p(""),d([...c,e.value])},className:"cursor-pointer",children:e.label},e.value))})}):null})]})}},11794:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>b});var r=s(95155),a=s(12115),n=s(35695),l=s(6874),i=s.n(l),o=s(12543),c=s(50172),d=s(51920),h=s(62177),x=s(90221),j=s(55594),u=s(30285),m=s(66695),p=s(62523),f=s(88539),g=s(17759),v=s(59409),N=s(22346),y=s(4313),w=s(68856);let C=j.Ik({title:j.Yj().min(3,"Title must be at least 3 characters"),description:j.Yj().min(10,"Description must be at least 10 characters"),content:j.Yj().optional(),location:j.Yj().min(3,"Location must be at least 3 characters"),startDate:j.Yj().refine(e=>!isNaN(Date.parse(e)),{message:"Please enter a valid start date"}),endDate:j.Yj().refine(e=>!isNaN(Date.parse(e)),{message:"Please enter a valid end date"}),status:j.k5(["UPCOMING","ONGOING","COMPLETED","CANCELLED"]),categoryId:j.Yj().min(1,"Please select a category"),imageUrl:j.Yj().url("Please enter a valid URL").optional().or(j.eu("")),posterCredit:j.Yj().optional(),tags:j.YO(j.Yj()).optional(),speakers:j.YO(j.Yj()).optional()}).refine(e=>{let t=new Date(e.startDate);return new Date(e.endDate)>=t},{message:"End date must be after start date",path:["endDate"]});function b(e){let{params:t}=e,s=a.use(t).id,l=(0,n.useRouter)(),[j,b]=(0,a.useState)(null),[E,k]=(0,a.useState)([]),[D,S]=(0,a.useState)([]),[I,R]=(0,a.useState)([]),[B,M]=(0,a.useState)(!1),[z,O]=(0,a.useState)(!0),[P,U]=(0,a.useState)(null),L=(0,h.mN)({resolver:(0,x.u)(C),defaultValues:{title:"",description:"",content:"",location:"",startDate:"",endDate:"",status:"UPCOMING",categoryId:"",imageUrl:"",posterCredit:"",tags:[],speakers:[]}});(0,a.useEffect)(()=>{let e=async()=>{try{O(!0);let e=await fetch("/api/events/".concat(s));if(!e.ok)throw Error("Failed to fetch event");let t=await e.json(),r=new Date(t.startDate).toISOString().split("T")[0],a=new Date(t.endDate).toISOString().split("T")[0];L.reset({title:t.title,description:t.description,content:t.content||"",location:t.location,startDate:r,endDate:a,status:t.status,categoryId:t.categoryId,imageUrl:t.posterImage||"",posterCredit:t.posterCredit||"",tags:t.tags.map(e=>e.tag.id),speakers:t.speakers.map(e=>e.speaker.id)}),b(t)}catch(e){console.error(e),U("Could not load event data")}finally{O(!1)}};s&&e()},[s,L]),(0,a.useEffect)(()=>{let e=async()=>{try{let e=await fetch("/api/tags");if(!e.ok)throw Error("Failed to fetch tags");let t=await e.json();S(t)}catch(e){console.error("Error fetching tags:",e)}},t=async()=>{try{let e=await fetch("/api/speakers");if(!e.ok)throw Error("Failed to fetch speakers");let t=await e.json();R(t)}catch(e){console.error("Error fetching speakers:",e)}};(async()=>{try{let e=await fetch("/api/event-categories");if(!e.ok)throw Error("Failed to fetch categories");let t=await e.json();k(t)}catch(e){console.error("Error fetching categories:",e)}})(),e(),t()},[]);let T=async e=>{try{M(!0);let t=await fetch("/api/events/".concat(s),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok){let e=await t.json();throw Error(e.error||"Failed to update event")}l.push("/dashboard/events/".concat(s))}catch(e){console.error("Error updating event:",e),M(!1)}};return z?(0,r.jsxs)("div",{className:"container mx-auto py-6",children:[(0,r.jsx)("div",{className:"flex items-center mb-6",children:(0,r.jsx)(u.$,{variant:"ghost",size:"sm",asChild:!0,children:(0,r.jsxs)(i(),{href:"/dashboard/events/".concat(s),children:[(0,r.jsx)(o.A,{className:"mr-2 h-4 w-4"}),"Back to Event"]})})}),(0,r.jsxs)(m.Zp,{children:[(0,r.jsxs)(m.aR,{children:[(0,r.jsx)(w.E,{className:"h-8 w-64 mb-2"}),(0,r.jsx)(w.E,{className:"h-4 w-48"})]}),(0,r.jsxs)(m.Wu,{className:"space-y-4",children:[(0,r.jsx)(w.E,{className:"h-10 w-full"}),(0,r.jsx)(w.E,{className:"h-24 w-full"}),(0,r.jsx)(w.E,{className:"h-10 w-full"}),(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,r.jsx)(w.E,{className:"h-10 w-full"}),(0,r.jsx)(w.E,{className:"h-10 w-full"})]})]})]})]}):P||!j?(0,r.jsxs)("div",{className:"container mx-auto py-6",children:[(0,r.jsx)("div",{className:"flex items-center mb-6",children:(0,r.jsx)(u.$,{variant:"ghost",size:"sm",asChild:!0,children:(0,r.jsxs)(i(),{href:"/dashboard/events",children:[(0,r.jsx)(o.A,{className:"mr-2 h-4 w-4"}),"Back to Events"]})})}),(0,r.jsx)(m.Zp,{children:(0,r.jsx)(m.Wu,{className:"flex items-center justify-center p-6",children:(0,r.jsxs)("p",{className:"text-center text-muted-foreground",children:[P||"Event not found",". Please try again later."]})})})]}):(0,r.jsxs)("div",{className:"container mx-auto py-6",children:[(0,r.jsx)("div",{className:"flex items-center mb-6",children:(0,r.jsx)(u.$,{variant:"ghost",size:"sm",asChild:!0,children:(0,r.jsxs)(i(),{href:"/dashboard/events/".concat(s),children:[(0,r.jsx)(o.A,{className:"mr-2 h-4 w-4"}),"Back to Event"]})})}),(0,r.jsxs)("div",{className:"grid gap-6 md:grid-cols-7",children:[(0,r.jsxs)(m.Zp,{className:"md:col-span-5",children:[(0,r.jsxs)(m.aR,{children:[(0,r.jsx)(m.ZB,{children:"Edit Event"}),(0,r.jsx)(m.BT,{children:"Update the details of your event"})]}),(0,r.jsx)(m.Wu,{children:(0,r.jsx)(g.lV,{...L,children:(0,r.jsxs)("form",{onSubmit:L.handleSubmit(T),className:"space-y-6",children:[(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsx)(g.zB,{control:L.control,name:"title",render:e=>{let{field:t}=e;return(0,r.jsxs)(g.eI,{children:[(0,r.jsx)(g.lR,{children:"Title"}),(0,r.jsx)(g.MJ,{children:(0,r.jsx)(p.p,{placeholder:"Event title",...t})}),(0,r.jsx)(g.C5,{})]})}}),(0,r.jsx)(g.zB,{control:L.control,name:"description",render:e=>{let{field:t}=e;return(0,r.jsxs)(g.eI,{children:[(0,r.jsx)(g.lR,{children:"Description"}),(0,r.jsx)(g.MJ,{children:(0,r.jsx)(f.T,{placeholder:"Brief description of the event",className:"min-h-[100px]",...t})}),(0,r.jsx)(g.C5,{})]})}}),(0,r.jsx)(g.zB,{control:L.control,name:"content",render:e=>{let{field:t}=e;return(0,r.jsxs)(g.eI,{children:[(0,r.jsx)(g.lR,{children:"Content"}),(0,r.jsx)(g.MJ,{children:(0,r.jsx)(f.T,{placeholder:"Detailed content of the event (optional)",className:"min-h-[200px]",...t})}),(0,r.jsx)(g.Rr,{children:"You can use HTML for formatting"}),(0,r.jsx)(g.C5,{})]})}}),(0,r.jsxs)("div",{className:"grid gap-4 md:grid-cols-2",children:[(0,r.jsx)(g.zB,{control:L.control,name:"startDate",render:e=>{let{field:t}=e;return(0,r.jsxs)(g.eI,{children:[(0,r.jsx)(g.lR,{children:"Start Date"}),(0,r.jsx)(g.MJ,{children:(0,r.jsx)(p.p,{type:"datetime-local",...t})}),(0,r.jsx)(g.C5,{})]})}}),(0,r.jsx)(g.zB,{control:L.control,name:"endDate",render:e=>{let{field:t}=e;return(0,r.jsxs)(g.eI,{children:[(0,r.jsx)(g.lR,{children:"End Date"}),(0,r.jsx)(g.MJ,{children:(0,r.jsx)(p.p,{type:"datetime-local",...t})}),(0,r.jsx)(g.C5,{})]})}})]}),(0,r.jsx)(g.zB,{control:L.control,name:"location",render:e=>{let{field:t}=e;return(0,r.jsxs)(g.eI,{children:[(0,r.jsx)(g.lR,{children:"Location"}),(0,r.jsx)(g.MJ,{children:(0,r.jsx)(p.p,{placeholder:"Event location",...t})}),(0,r.jsx)(g.C5,{})]})}}),(0,r.jsxs)("div",{className:"grid gap-4 md:grid-cols-2",children:[(0,r.jsx)(g.zB,{control:L.control,name:"status",render:e=>{let{field:t}=e;return(0,r.jsxs)(g.eI,{children:[(0,r.jsx)(g.lR,{children:"Status"}),(0,r.jsxs)(v.l6,{onValueChange:t.onChange,defaultValue:t.value,children:[(0,r.jsx)(g.MJ,{children:(0,r.jsx)(v.bq,{children:(0,r.jsx)(v.yv,{placeholder:"Select status"})})}),(0,r.jsxs)(v.gC,{children:[(0,r.jsx)(v.eb,{value:"UPCOMING",children:"Upcoming"}),(0,r.jsx)(v.eb,{value:"ONGOING",children:"Ongoing"}),(0,r.jsx)(v.eb,{value:"COMPLETED",children:"Completed"}),(0,r.jsx)(v.eb,{value:"CANCELLED",children:"Cancelled"})]})]}),(0,r.jsx)(g.C5,{})]})}}),(0,r.jsx)(g.zB,{control:L.control,name:"categoryId",render:e=>{let{field:t}=e;return(0,r.jsxs)(g.eI,{children:[(0,r.jsx)(g.lR,{children:"Category"}),(0,r.jsxs)(v.l6,{onValueChange:t.onChange,defaultValue:t.value,children:[(0,r.jsx)(g.MJ,{children:(0,r.jsx)(v.bq,{children:(0,r.jsx)(v.yv,{placeholder:"Select category"})})}),(0,r.jsx)(v.gC,{children:E.map(e=>(0,r.jsx)(v.eb,{value:e.id,children:e.name},e.id))})]}),(0,r.jsx)(g.C5,{})]})}})]}),(0,r.jsxs)("div",{className:"grid gap-4 md:grid-cols-2",children:[(0,r.jsx)(g.zB,{control:L.control,name:"imageUrl",render:e=>{let{field:t}=e;return(0,r.jsxs)(g.eI,{children:[(0,r.jsx)(g.lR,{children:"Image URL"}),(0,r.jsx)(g.MJ,{children:(0,r.jsx)(p.p,{placeholder:"URL for event image",...t})}),(0,r.jsx)(g.Rr,{children:"Optional image for the event"}),(0,r.jsx)(g.C5,{})]})}}),(0,r.jsx)(g.zB,{control:L.control,name:"posterCredit",render:e=>{let{field:t}=e;return(0,r.jsxs)(g.eI,{children:[(0,r.jsx)(g.lR,{children:"Poster Credit"}),(0,r.jsx)(g.MJ,{children:(0,r.jsx)(p.p,{placeholder:"Credit for the event poster",...t})}),(0,r.jsx)(g.Rr,{children:"Optional credit for the event poster"}),(0,r.jsx)(g.C5,{})]})}})]}),(0,r.jsx)(N.w,{}),(0,r.jsx)(g.zB,{control:L.control,name:"tags",render:e=>{let{field:t}=e;return(0,r.jsxs)(g.eI,{children:[(0,r.jsx)(g.lR,{children:"Tags"}),(0,r.jsx)(g.MJ,{children:(0,r.jsx)(y.K,{options:D.map(e=>({label:e.name,value:e.id})),placeholder:"Select tags",selected:t.value||[],onChange:t.onChange})}),(0,r.jsx)(g.Rr,{children:"Select relevant tags for the event"}),(0,r.jsx)(g.C5,{})]})}}),(0,r.jsx)(g.zB,{control:L.control,name:"speakers",render:e=>{let{field:t}=e;return(0,r.jsxs)(g.eI,{children:[(0,r.jsx)(g.lR,{children:"Speakers"}),(0,r.jsx)(g.MJ,{children:(0,r.jsx)(y.K,{options:I.map(e=>({label:e.name,value:e.id})),placeholder:"Select speakers",selected:t.value||[],onChange:t.onChange})}),(0,r.jsx)(g.Rr,{children:"Select speakers for the event"}),(0,r.jsx)(g.C5,{})]})}})]}),(0,r.jsx)("div",{className:"flex justify-end",children:(0,r.jsxs)(u.$,{type:"submit",disabled:B,children:[B&&(0,r.jsx)(c.A,{className:"mr-2 h-4 w-4 animate-spin"}),"Update Event"]})})]})})})]}),(0,r.jsx)("div",{className:"md:col-span-2",children:(0,r.jsxs)(m.Zp,{children:[(0,r.jsx)(m.aR,{children:(0,r.jsx)(m.ZB,{children:"Editing Tips"})}),(0,r.jsxs)(m.Wu,{className:"space-y-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"font-medium mb-1",children:"Event Status"}),(0,r.jsx)("p",{className:"text-sm text-muted-foreground",children:"Update the status to reflect the current state of your event."})]}),(0,r.jsx)(N.w,{}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"font-medium mb-1",children:"Date Changes"}),(0,r.jsx)("p",{className:"text-sm text-muted-foreground",children:"If you change the dates, make sure to update any related presentations."})]}),(0,r.jsx)(N.w,{}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"font-medium mb-1",children:"Speakers"}),(0,r.jsx)("p",{className:"text-sm text-muted-foreground",children:"Adding or removing speakers will affect the event's schedule."})]})]}),(0,r.jsx)(m.wL,{className:"flex justify-center",children:(0,r.jsx)(d.A,{className:"h-16 w-16 text-muted-foreground"})})]})})]})]})}},22346:(e,t,s)=>{"use strict";s.d(t,{w:()=>i});var r=s(95155),a=s(12115),n=s(87489),l=s(59434);let i=a.forwardRef((e,t)=>{let{className:s,orientation:a="horizontal",decorative:i=!0,...o}=e;return(0,r.jsx)(n.b,{ref:t,decorative:i,orientation:a,className:(0,l.cn)("shrink-0 bg-border","horizontal"===a?"h-[1px] w-full":"h-full w-[1px]",s),...o})});i.displayName=n.b.displayName},51920:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});let r=(0,s(40157).A)("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]])},59090:(e,t,s)=>{Promise.resolve().then(s.bind(s,11794))},68856:(e,t,s)=>{"use strict";s.d(t,{E:()=>n});var r=s(95155),a=s(59434);function n(e){let{className:t,...s}=e;return(0,r.jsx)("div",{className:(0,a.cn)("animate-pulse rounded-md bg-primary/10",t),...s})}},87489:(e,t,s)=>{"use strict";s.d(t,{b:()=>c});var r=s(12115),a=s(63655),n=s(95155),l="horizontal",i=["horizontal","vertical"],o=r.forwardRef((e,t)=>{var s;let{decorative:r,orientation:o=l,...c}=e,d=(s=o,i.includes(s))?o:l;return(0,n.jsx)(a.sG.div,{"data-orientation":d,...r?{role:"none"}:{"aria-orientation":"vertical"===d?d:void 0,role:"separator"},...c,ref:t})});o.displayName="Separator";var c=o}},e=>{var t=t=>e(e.s=t);e.O(0,[9352,652,9764,6874,5521,1859,593,5357,2721,8441,1684,7358],()=>t(59090)),_N_E=e.O()}]);
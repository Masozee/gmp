(()=>{var e={};e.id=361,e.ids=[361],e.modules={3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},28331:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});let a=(0,s(12907).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/Users/pro/Dev/gmp/src/app/dashboard/publications/[id]/page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/pro/Dev/gmp/src/app/dashboard/publications/[id]/page.tsx","default")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},29341:(e,t,s)=>{Promise.resolve().then(s.bind(s,28331))},33873:e=>{"use strict";e.exports=require("path")},41305:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>v});var a=s(60687),r=s(43210),i=s.n(r),n=s(16189),l=s(55817),o=s(69861),d=s(57207),c=s(76311),p=s(29523),u=s(44493),m=s(96834),x=s(32584),f=s(35950),h=s(55925);function v({params:e}){let t=(0,n.useRouter)(),[s,v]=(0,r.useState)(null),[g,b]=(0,r.useState)(!0),[j,y]=(0,r.useState)(null),N=i().use(e).id,w={DRAFT:{label:"Draft",variant:"secondary"},PUBLISHED:{label:"Published",variant:"default"},ARCHIVED:{label:"Archived",variant:"outline"}},A=async()=>{try{if(!(await fetch(`/api/publications/${N}`,{method:"DELETE"})).ok)throw Error("Failed to delete publication");t.push("/dashboard/publications")}catch(e){console.error("Error deleting publication:",e),y("Failed to delete publication. Please try again.")}};return g?(0,a.jsx)("div",{className:"flex items-center justify-center h-screen",children:(0,a.jsx)("p",{className:"text-muted-foreground",children:"Loading publication..."})}):j||!s?(0,a.jsxs)("div",{className:"flex flex-col items-center justify-center h-screen gap-4",children:[(0,a.jsx)("p",{className:"text-destructive",children:j||"Publication not found"}),(0,a.jsxs)(p.$,{variant:"outline",onClick:()=>t.push("/dashboard/publications"),children:[(0,a.jsx)(l.A,{className:"mr-2 h-4 w-4"}),"Back to Publications"]})]}):(0,a.jsxs)("div",{className:"flex flex-col gap-8 p-8",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)(p.$,{variant:"outline",onClick:()=>t.push("/dashboard/publications"),children:[(0,a.jsx)(l.A,{className:"mr-2 h-4 w-4"}),"Back to Publications"]}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsxs)(p.$,{variant:"outline",onClick:()=>t.push(`/dashboard/publications/${N}/edit`),children:[(0,a.jsx)(o.A,{className:"mr-2 h-4 w-4"}),"Edit"]}),(0,a.jsxs)(h.Lt,{children:[(0,a.jsx)(h.tv,{asChild:!0,children:(0,a.jsxs)(p.$,{variant:"destructive",children:[(0,a.jsx)(d.A,{className:"mr-2 h-4 w-4"}),"Delete"]})}),(0,a.jsxs)(h.EO,{children:[(0,a.jsxs)(h.wd,{children:[(0,a.jsx)(h.r7,{children:"Are you sure?"}),(0,a.jsx)(h.$v,{children:"This action cannot be undone. This will permanently delete the publication and all its associated data."})]}),(0,a.jsxs)(h.ck,{children:[(0,a.jsx)(h.Zr,{children:"Cancel"}),(0,a.jsx)(h.Rx,{onClick:A,children:"Delete"})]})]})]})]})]}),(0,a.jsxs)(u.Zp,{children:[(0,a.jsx)(u.aR,{children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsx)(u.ZB,{children:s.title}),(0,a.jsx)(u.BT,{children:s.description})]}),(0,a.jsx)(m.E,{variant:w[s.status].variant,children:w[s.status].label})]})}),(0,a.jsxs)(u.Wu,{className:"space-y-6",children:[s.coverImage&&(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("img",{src:s.coverImage,alt:s.title,className:"w-full rounded-lg object-cover max-h-[400px]"}),s.coverCredit&&(0,a.jsxs)("p",{className:"text-sm text-muted-foreground text-right",children:["Photo credit: ",s.coverCredit]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold",children:"Authors"}),(0,a.jsx)("div",{className:"flex flex-wrap gap-4",children:s.authors.map((e,t)=>(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsxs)(x.eu,{children:[(0,a.jsx)(x.BK,{src:e.profile.photoUrl||"",alt:`${e.profile.firstName} ${e.profile.lastName}`}),(0,a.jsxs)(x.q5,{children:[e.profile.firstName[0],e.profile.lastName[0]]})]}),(0,a.jsxs)("span",{children:[e.profile.firstName," ",e.profile.lastName]})]},t))})]}),(0,a.jsx)(f.w,{}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold",children:"Content"}),(0,a.jsx)("div",{className:"prose max-w-none",children:s.content.split("\n").map((e,t)=>(0,a.jsx)("p",{children:e},t))})]}),s.files.length>0&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(f.w,{}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold",children:"Attachments"}),(0,a.jsx)("div",{className:"grid gap-2",children:s.files.map((e,t)=>(0,a.jsxs)("a",{href:e.url,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-2 p-2 rounded-lg border hover:bg-muted",children:[(0,a.jsx)(c.A,{className:"h-4 w-4"}),(0,a.jsx)("span",{children:e.name}),(0,a.jsxs)("span",{className:"text-sm text-muted-foreground",children:["(",Math.round(e.size/1024),"KB)"]})]},t))})]})]}),(0,a.jsx)(f.w,{}),(0,a.jsxs)("div",{className:"flex justify-between text-sm text-muted-foreground",children:[(0,a.jsxs)("span",{children:["Created: ",new Date(s.createdAt).toLocaleString()]}),(0,a.jsxs)("span",{children:["Updated: ",new Date(s.updatedAt).toLocaleString()]})]})]})]})]})}},55817:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(82614).A)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},55925:(e,t,s)=>{"use strict";s.d(t,{Lt:()=>q,Rx:()=>S,Zr:()=>T,EO:()=>U,$v:()=>O,ck:()=>B,wd:()=>F,r7:()=>I,tv:()=>z});var a=s(60687),r=s(43210),i=s(11273),n=s(98599),l=s(26134),o=s(70569),d=s(8730),c="AlertDialog",[p,u]=(0,i.A)(c,[l.Hs]),m=(0,l.Hs)(),x=e=>{let{__scopeAlertDialog:t,...s}=e,r=m(t);return(0,a.jsx)(l.bL,{...r,...s,modal:!0})};x.displayName=c;var f=r.forwardRef((e,t)=>{let{__scopeAlertDialog:s,...r}=e,i=m(s);return(0,a.jsx)(l.l9,{...i,...r,ref:t})});f.displayName="AlertDialogTrigger";var h=e=>{let{__scopeAlertDialog:t,...s}=e,r=m(t);return(0,a.jsx)(l.ZL,{...r,...s})};h.displayName="AlertDialogPortal";var v=r.forwardRef((e,t)=>{let{__scopeAlertDialog:s,...r}=e,i=m(s);return(0,a.jsx)(l.hJ,{...i,...r,ref:t})});v.displayName="AlertDialogOverlay";var g="AlertDialogContent",[b,j]=p(g),y=(0,d.Dc)("AlertDialogContent"),N=r.forwardRef((e,t)=>{let{__scopeAlertDialog:s,children:i,...d}=e,c=m(s),p=r.useRef(null),u=(0,n.s)(t,p),x=r.useRef(null);return(0,a.jsx)(l.G$,{contentName:g,titleName:w,docsSlug:"alert-dialog",children:(0,a.jsx)(b,{scope:s,cancelRef:x,children:(0,a.jsxs)(l.UC,{role:"alertdialog",...c,...d,ref:u,onOpenAutoFocus:(0,o.m)(d.onOpenAutoFocus,e=>{e.preventDefault(),x.current?.focus({preventScroll:!0})}),onPointerDownOutside:e=>e.preventDefault(),onInteractOutside:e=>e.preventDefault(),children:[(0,a.jsx)(y,{children:i}),(0,a.jsx)(E,{contentRef:p})]})})})});N.displayName=g;var w="AlertDialogTitle",A=r.forwardRef((e,t)=>{let{__scopeAlertDialog:s,...r}=e,i=m(s);return(0,a.jsx)(l.hE,{...i,...r,ref:t})});A.displayName=w;var D="AlertDialogDescription",P=r.forwardRef((e,t)=>{let{__scopeAlertDialog:s,...r}=e,i=m(s);return(0,a.jsx)(l.VY,{...i,...r,ref:t})});P.displayName=D;var k=r.forwardRef((e,t)=>{let{__scopeAlertDialog:s,...r}=e,i=m(s);return(0,a.jsx)(l.bm,{...i,...r,ref:t})});k.displayName="AlertDialogAction";var R="AlertDialogCancel",C=r.forwardRef((e,t)=>{let{__scopeAlertDialog:s,...r}=e,{cancelRef:i}=j(R,s),o=m(s),d=(0,n.s)(t,i);return(0,a.jsx)(l.bm,{...o,...r,ref:d})});C.displayName=R;var E=({contentRef:e})=>{let t=`\`${g}\` requires a description for the component to be accessible for screen reader users.

You can add a description to the \`${g}\` by passing a \`${D}\` component as a child, which also benefits sighted users by adding visible context to the dialog.

Alternatively, you can use your own component as a description by assigning it an \`id\` and passing the same value to the \`aria-describedby\` prop in \`${g}\`. If the description is confusing or duplicative for sighted users, you can use the \`@radix-ui/react-visually-hidden\` primitive as a wrapper around your description component.

For more information, see https://radix-ui.com/primitives/docs/components/alert-dialog`;return r.useEffect(()=>{document.getElementById(e.current?.getAttribute("aria-describedby"))||console.warn(t)},[t,e]),null},_=s(4780),$=s(29523);let q=x,z=f,L=r.forwardRef(({className:e,...t},s)=>(0,a.jsx)(v,{className:(0,_.cn)("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t,ref:s}));L.displayName=v.displayName;let U=r.forwardRef(({className:e,...t},s)=>(0,a.jsxs)(h,{children:[(0,a.jsx)(L,{}),(0,a.jsx)(N,{ref:s,className:(0,_.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...t})]}));U.displayName=N.displayName;let F=({className:e,...t})=>(0,a.jsx)("div",{className:(0,_.cn)("flex flex-col space-y-2 text-center sm:text-left",e),...t});F.displayName="AlertDialogHeader";let B=({className:e,...t})=>(0,a.jsx)("div",{className:(0,_.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",e),...t});B.displayName="AlertDialogFooter";let I=r.forwardRef(({className:e,...t},s)=>(0,a.jsx)(A,{ref:s,className:(0,_.cn)("text-lg font-semibold",e),...t}));I.displayName=A.displayName;let O=r.forwardRef(({className:e,...t},s)=>(0,a.jsx)(P,{ref:s,className:(0,_.cn)("text-sm text-muted-foreground",e),...t}));O.displayName=P.displayName;let S=r.forwardRef(({className:e,...t},s)=>(0,a.jsx)(k,{ref:s,className:(0,_.cn)((0,$.r)(),e),...t}));S.displayName=k.displayName;let T=r.forwardRef(({className:e,...t},s)=>(0,a.jsx)(C,{ref:s,className:(0,_.cn)((0,$.r)({variant:"outline"}),"mt-2 sm:mt-0",e),...t}));T.displayName=C.displayName},56957:(e,t,s)=>{Promise.resolve().then(s.bind(s,41305))},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},69861:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(82614).A)("Pencil",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]])},70223:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>n.a,__next_app__:()=>p,pages:()=>c,routeModule:()=>u,tree:()=>d});var a=s(65239),r=s(48088),i=s(88170),n=s.n(i),l=s(30893),o={};for(let e in l)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>l[e]);s.d(t,o);let d={children:["",{children:["dashboard",{children:["publications",{children:["[id]",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,28331)),"/Users/pro/Dev/gmp/src/app/dashboard/publications/[id]/page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,63144)),"/Users/pro/Dev/gmp/src/app/dashboard/layout.tsx"],metadata:{icon:[async e=>(await Promise.resolve().then(s.bind(s,70440))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(s.bind(s,61137)),"/Users/pro/Dev/gmp/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,57398,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(s.t.bind(s,89999,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(s.t.bind(s,65284,23)),"next/dist/client/components/unauthorized-error"],metadata:{icon:[async e=>(await Promise.resolve().then(s.bind(s,70440))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]}.children,c=["/Users/pro/Dev/gmp/src/app/dashboard/publications/[id]/page.tsx"],p={require:s,loadChunk:()=>Promise.resolve()},u=new a.AppPageRouteModule({definition:{kind:r.RouteKind.APP_PAGE,page:"/dashboard/publications/[id]/page",pathname:"/dashboard/publications/[id]",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},76311:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(82614).A)("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},79551:e=>{"use strict";e.exports=require("url")},96834:(e,t,s)=>{"use strict";s.d(t,{E:()=>l});var a=s(60687);s(43210);var r=s(24224),i=s(4780);let n=(0,r.F)("inline-flex items-center rounded-md border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground shadow hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground shadow hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function l({className:e,variant:t,...s}){return(0,a.jsx)("div",{className:(0,i.cn)(n({variant:t}),e),...s})}}};var t=require("../../../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),a=t.X(0,[4447,163,5767,7210,6460,8749,9882,6282,4030],()=>s(70223));module.exports=a})();
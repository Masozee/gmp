(()=>{var e={};e.id=197,e.ids=[197],e.modules={2661:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>Y});var a=t(60687),r=t(43210),l=t(35265),i=t(41936),n=t(90586),c=t(82614);let o=(0,c.A)("BookText",[["path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H19a1 1 0 0 1 1 1v18a1 1 0 0 1-1 1H6.5a1 1 0 0 1 0-5H20",key:"k3hazp"}],["path",{d:"M8 11h8",key:"vwpz6n"}],["path",{d:"M8 7h6",key:"1f0q6e"}]]);var d=t(29523),h=t(89667),u=t(15079),x=t(44493),p=t(16189),m=t(15036),j=t(38765);let g=(0,c.A)("Archive",[["rect",{width:"20",height:"5",x:"2",y:"3",rx:"1",key:"1wp1u1"}],["path",{d:"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8",key:"1s80jp"}],["path",{d:"M10 12h4",key:"a56b0p"}]]);var f=t(77368),v=t(11781),b=t(35748),y=t(20620),w=t(69795),N=t(76311),C=t(69861),A=t(57207),S=t(52581),k=t(6211),E=t(21342),R=t(96834),P=t(32584),D=t(82978),T=t(55925),I=t(27605),$=t(63442),z=t(45880),B=t(38485),U=t(58450),q=t(54052),L=t(63503),F=t(71669),O=t(34729),M=t(41784),_=t(40988),H=t(4780);let V=z.Ik({title:z.Yj().min(3,"Title must be at least 3 characters").max(100,"Title must be less than 100 characters"),description:z.Yj().min(10,"Description must be at least 10 characters").max(500,"Description must be less than 500 characters"),content:z.Yj().min(50,"Content must be at least 50 characters"),status:z.k5(["DRAFT","PUBLISHED"],{required_error:"Please select a status"}),category:z.Yj().min(1,"Category is required"),tags:z.YO(z.Yj()).optional(),coverCredit:z.Yj().optional(),coverImage:z.bz().refine(e=>!e||e instanceof File&&e.size<=5242880,"Cover image must be less than 5MB").optional(),authors:z.YO(z.Yj()).min(1,"At least one author is required")});function J({open:e,onOpenChange:s,onSuccess:t}){let l=(0,p.useRouter)(),[i,n]=(0,r.useState)(null),[c,o]=(0,r.useState)(!1),[x,m]=(0,r.useState)([]),[j,g]=(0,r.useState)([]),[f,v]=(0,r.useState)([]),[b,y]=(0,r.useState)(!1),[w,N]=(0,r.useState)(!1),C=(0,I.mN)({resolver:(0,$.u)(V),defaultValues:{title:"",description:"",content:"",status:"DRAFT",category:"",tags:[],coverCredit:"",coverImage:void 0,authors:[]}}),A=C.watch("description"),k=C.watch("content");async function E(e){try{if(o(!0),n(null),!e.title){C.setError("title",{type:"required",message:"Title is required"}),o(!1);return}if(!e.description){C.setError("description",{type:"required",message:"Description is required"}),o(!1);return}if(!e.content){C.setError("content",{type:"required",message:"Content is required"}),o(!1);return}if(!e.category){C.setError("category",{type:"required",message:"Category is required"}),o(!1);return}if(!e.authors.length){C.setError("authors",{type:"required",message:"At least one author is required"}),o(!1);return}let a=new FormData;for(let[s,t]of Object.entries(e))"authors"===s?t.forEach(e=>{a.append("authors[]",e)}):"category"===s?a.append("categories[]",t):"tags"===s?t&&Array.isArray(t)&&t.forEach(e=>{a.append("tags[]",e)}):"coverImage"!==s&&a.append(s,t);e.coverImage instanceof File&&a.append("coverImage",e.coverImage);let r=await fetch("/api/publications",{method:"POST",body:a});if(!r.ok){let e=await r.json();throw Error(e.error||"Failed to create publication")}let i=await r.json();C.reset(),s(!1),t?.(),l.push(`/dashboard/publications/${i.id}`)}catch(e){console.error("Form submission error:",e),n(e instanceof Error?e.message:"An error occurred"),S.oR.error("Failed to create publication",{description:e instanceof Error?e.message:"Please try again"})}finally{o(!1)}}let P=async e=>{try{N(!0);let s=await fetch("/api/tags",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:e})});if(!s.ok)throw Error("Failed to create tag");let t=await s.json();v(e=>[...e,t]);let a=new Set(C.getValues("tags")||[]);a.add(t.id),C.setValue("tags",Array.from(a),{shouldValidate:!0}),S.oR.success("Tag created successfully")}catch(e){console.error("Error creating tag:",e),S.oR.error("Failed to create tag",{description:"Please try again."})}finally{N(!1)}};return(0,a.jsx)(L.lG,{open:e,onOpenChange:s,children:(0,a.jsxs)(L.Cf,{className:"sm:max-w-[625px] max-h-[90vh] overflow-y-auto",children:[(0,a.jsxs)(L.c7,{children:[(0,a.jsx)(L.L3,{children:"Create Publication"}),(0,a.jsx)(L.rr,{children:"Create a new publication. Click save when you're done."})]}),(0,a.jsx)(F.lV,{...C,children:(0,a.jsxs)("form",{onSubmit:C.handleSubmit(E),className:"space-y-8",children:[(0,a.jsx)(F.zB,{control:C.control,name:"title",render:({field:e})=>(0,a.jsxs)(F.eI,{children:[(0,a.jsx)(F.lR,{children:"Title"}),(0,a.jsx)(F.MJ,{children:(0,a.jsx)(h.p,{placeholder:"Enter title",...e})}),(0,a.jsx)(F.Rr,{children:"The title of your publication. This will be displayed prominently."}),(0,a.jsx)(F.C5,{})]})}),(0,a.jsx)(F.zB,{control:C.control,name:"description",render:({field:e})=>(0,a.jsxs)(F.eI,{children:[(0,a.jsx)(F.lR,{children:"Description"}),(0,a.jsx)(F.MJ,{children:(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(O.T,{placeholder:"Enter description",...e}),(0,a.jsxs)("div",{className:"absolute bottom-2 right-2 text-xs text-muted-foreground",children:[A?.length||0,"/500"]})]})}),(0,a.jsx)(F.Rr,{children:"A brief summary of the publication. This will appear in listings and previews."}),(0,a.jsx)(F.C5,{})]})}),(0,a.jsx)(F.zB,{control:C.control,name:"content",render:({field:e})=>(0,a.jsxs)(F.eI,{children:[(0,a.jsx)(F.lR,{children:"Content"}),(0,a.jsx)(F.MJ,{children:(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(O.T,{placeholder:"Enter content",className:"min-h-[200px]",...e}),(0,a.jsxs)("div",{className:"absolute bottom-2 right-2 text-xs text-muted-foreground",children:[k?.length||0," characters"]})]})}),(0,a.jsx)(F.Rr,{children:"The main content of your publication. Minimum 50 characters required."}),(0,a.jsx)(F.C5,{})]})}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsx)(F.zB,{control:C.control,name:"status",render:({field:e})=>(0,a.jsxs)(F.eI,{children:[(0,a.jsx)(F.lR,{children:"Status"}),(0,a.jsxs)(u.l6,{onValueChange:e.onChange,defaultValue:e.value,children:[(0,a.jsx)(F.MJ,{children:(0,a.jsx)(u.bq,{children:(0,a.jsx)(u.yv,{placeholder:"Select status"})})}),(0,a.jsxs)(u.gC,{children:[(0,a.jsx)(u.eb,{value:"DRAFT",children:"Draft"}),(0,a.jsx)(u.eb,{value:"PUBLISHED",children:"Published"})]})]}),(0,a.jsx)(F.Rr,{children:"Draft publications are not visible to the public."}),(0,a.jsx)(F.C5,{})]})}),(0,a.jsx)(F.zB,{control:C.control,name:"category",render:({field:e})=>(0,a.jsxs)(F.eI,{children:[(0,a.jsx)(F.lR,{children:"Category"}),(0,a.jsxs)(u.l6,{onValueChange:e.onChange,defaultValue:e.value,children:[(0,a.jsx)(F.MJ,{children:(0,a.jsx)(u.bq,{children:(0,a.jsx)(u.yv,{placeholder:"Select a category"})})}),(0,a.jsx)(u.gC,{children:j.map(e=>(0,a.jsx)(u.eb,{value:e.id,children:e.name},e.id))})]}),(0,a.jsx)(F.Rr,{children:"Select a primary category for your publication."}),(0,a.jsx)(F.C5,{})]})})]}),(0,a.jsx)(F.zB,{control:C.control,name:"authors",render:({field:e})=>(0,a.jsxs)(F.eI,{children:[(0,a.jsx)(F.lR,{children:"Authors"}),(0,a.jsxs)(_.AM,{children:[(0,a.jsx)(_.Wv,{asChild:!0,children:(0,a.jsx)(F.MJ,{children:(0,a.jsxs)(d.$,{variant:"outline",role:"combobox",className:(0,H.cn)("w-full justify-between",!e.value.length&&"text-muted-foreground"),children:[e.value.length>0?`${e.value.length} author${e.value.length>1?"s":""} selected`:"Select authors",(0,a.jsx)(B.A,{className:"ml-2 h-4 w-4 shrink-0 opacity-50"})]})})}),(0,a.jsx)(_.hl,{className:"w-[400px] p-0",children:(0,a.jsxs)(M.uB,{children:[(0,a.jsx)(M.G7,{placeholder:"Search authors..."}),(0,a.jsxs)(M.oI,{children:[(0,a.jsx)(M.xL,{children:"No authors found."}),(0,a.jsx)(M.L$,{children:x.map(s=>(0,a.jsxs)(M.h_,{onSelect:()=>{let t=new Set(e.value);t.has(s.id)?t.delete(s.id):t.add(s.id),e.onChange(Array.from(t))},children:[(0,a.jsx)(U.A,{className:(0,H.cn)("mr-2 h-4 w-4",e.value.includes(s.id)?"opacity-100":"opacity-0")}),s.firstName," ",s.lastName]},s.id))})]})]})})]}),(0,a.jsx)("div",{className:"flex flex-wrap gap-2 mt-2",children:e.value.map(e=>{let s=x.find(s=>s.id===e);return s?(0,a.jsxs)(R.E,{variant:"secondary",className:"text-sm",children:[s.firstName," ",s.lastName]},s.id):null})}),(0,a.jsx)(F.Rr,{children:"Select one or more authors for this publication."}),(0,a.jsx)(F.C5,{})]})}),(0,a.jsx)(F.zB,{control:C.control,name:"coverImage",render:({field:{value:e,onChange:s,...t}})=>(0,a.jsxs)(F.eI,{children:[(0,a.jsx)(F.lR,{children:"Cover Image"}),(0,a.jsx)(F.MJ,{children:(0,a.jsx)(h.p,{type:"file",accept:"image/*",onChange:e=>{s(e.target.files?.[0])},...t})}),(0,a.jsx)(F.Rr,{children:"Upload an image (max 5MB). Recommended size: 1200x630 pixels."}),(0,a.jsx)(F.C5,{})]})}),(0,a.jsx)(F.zB,{control:C.control,name:"coverCredit",render:({field:e})=>(0,a.jsxs)(F.eI,{children:[(0,a.jsx)(F.lR,{children:"Cover Image Credit"}),(0,a.jsx)(F.MJ,{children:(0,a.jsx)(h.p,{placeholder:"Enter cover image credit",...e})}),(0,a.jsx)(F.Rr,{children:"Credit the creator or source of the cover image if applicable."}),(0,a.jsx)(F.C5,{})]})}),(0,a.jsx)(F.zB,{control:C.control,name:"tags",render:({field:e})=>(0,a.jsxs)(F.eI,{children:[(0,a.jsx)(F.lR,{children:"Tags"}),(0,a.jsxs)(_.AM,{children:[(0,a.jsx)(_.Wv,{asChild:!0,children:(0,a.jsx)(F.MJ,{children:(0,a.jsxs)(d.$,{variant:"outline",role:"combobox",className:(0,H.cn)("w-full justify-between",!e.value?.length&&"text-muted-foreground"),children:[e.value&&e.value.length>0?`${e.value.length} tag${e.value.length>1?"s":""} selected`:"Select tags",(0,a.jsx)(B.A,{className:"ml-2 h-4 w-4 shrink-0 opacity-50"})]})})}),(0,a.jsx)(_.hl,{className:"w-[400px] p-0",children:(0,a.jsxs)(M.uB,{children:[(0,a.jsx)(M.G7,{placeholder:"Search tags...",onValueChange:e=>{let s=document.getElementById("new-tag-text");s&&(s.textContent=e)}}),(0,a.jsxs)(M.oI,{children:[(0,a.jsx)(M.xL,{children:(0,a.jsxs)(d.$,{variant:"outline",size:"sm",className:"w-full justify-start mt-2",onClick:()=>{let e=document.querySelector("[cmdk-input]"),s=e?.value;s&&""!==s.trim()&&P(s)},children:[(0,a.jsx)(q.A,{className:"mr-2 h-4 w-4"}),'Create "',(0,a.jsx)("span",{id:"new-tag-text"}),'"']})}),(0,a.jsx)(M.L$,{children:f.map(s=>(0,a.jsxs)(M.h_,{onSelect:()=>{let t=new Set(e.value||[]);t.has(s.id)?t.delete(s.id):t.add(s.id),e.onChange(Array.from(t))},children:[(0,a.jsx)(U.A,{className:(0,H.cn)("mr-2 h-4 w-4",e.value?.includes(s.id)?"opacity-100":"opacity-0")}),s.name]},s.id))})]})]})})]}),(0,a.jsx)("div",{className:"flex flex-wrap gap-2 mt-2",children:e.value?.map(e=>{let s=f.find(s=>s.id===e);return s?(0,a.jsx)(R.E,{variant:"secondary",className:"text-sm",children:s.name},s.id):null})}),(0,a.jsx)(F.Rr,{children:"Select existing tags or type to create new ones for better discoverability."}),(0,a.jsx)(F.C5,{})]})}),i&&(0,a.jsx)("div",{className:"text-sm font-medium text-destructive bg-destructive/10 p-3 rounded-md mb-4",children:i}),(0,a.jsxs)(L.Es,{children:[(0,a.jsx)(d.$,{type:"button",variant:"outline",onClick:()=>s(!1),children:"Cancel"}),(0,a.jsx)(d.$,{type:"submit",disabled:c,children:c?"Creating...":"Create"})]})]})})]})})}function G({searchQuery:e,statusFilter:s,categoryFilter:t}){let l=(0,p.useRouter)(),[i,c]=(0,r.useState)([]),[o,h]=(0,r.useState)(new Set),[x,I]=(0,r.useState)(!0),[$,z]=(0,r.useState)(null),[B,U]=(0,r.useState)(!1),[q,L]=(0,r.useState)(null),[F,O]=(0,r.useState)(!1),[M,_]=(0,r.useState)(!1),[H,V]=(0,r.useState)("updatedAt"),[G,Y]=(0,r.useState)("desc"),[Z,W]=(0,r.useState)(!1),[Q,X]=(0,r.useState)(!1),[K,ee]=(0,r.useState)("PUBLISHED"),es={DRAFT:{label:"Draft",icon:m.A,variant:"secondary"},PUBLISHED:{label:"Published",icon:j.A,variant:"default"},ARCHIVED:{label:"Archived",icon:g,variant:"outline"}},et=async()=>{try{I(!0),z(null);let a=new URLSearchParams;e&&a.append("search",e),s&&"all"!==s&&a.append("status",s.toUpperCase()),t&&a.append("category",t),a.append("sort",H),a.append("order",G);let r=await fetch(`/api/publications?${a.toString()}`);if(!r.ok)throw Error("Failed to fetch publications");let l=await r.json();c(l.publications||[])}catch(e){console.error("Error fetching publications:",e),z("Failed to fetch publications. Please try again.")}finally{I(!1)}},ea=e=>{H===e?Y("asc"===G?"desc":"asc"):(V(e),Y("asc"))},er=e=>{let s=new Set(o);s.has(e)?s.delete(e):s.add(e),h(s)},el=async e=>{try{O(!0),z(null),await Promise.all(e.map(e=>fetch(`/api/publications/${e}`,{method:"DELETE"}))),c(s=>s.filter(s=>!e.includes(s.id))),h(new Set),W(!1)}catch(e){console.error("Error deleting publications:",e),z("Failed to delete publications. Please try again.")}finally{O(!1)}},ei=async()=>{try{_(!0),z(null),await Promise.all(Array.from(o).map(e=>fetch(`/api/publications/${e}`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({status:K})}))),await et(),h(new Set),X(!1)}catch(e){console.error("Error updating publications:",e),z("Failed to update publications. Please try again.")}finally{_(!1)}},en=async(e,s)=>{try{I(!0),z(null);let t=await fetch(`/api/publications/${e}`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({status:s})});if(!t.ok){let e=await t.json();throw Error(e.error||"Failed to update publication status")}let a=await t.json();c(s=>s.map(s=>s.id===e?a:s)),S.oR.success("Publication status updated successfully")}catch(e){console.error("Error updating publication status:",e),z(e instanceof Error?e.message:"Failed to update publication status"),S.oR.error("Failed to update publication status")}finally{I(!1)}};if($)return(0,a.jsxs)("div",{className:"flex flex-col items-center justify-center h-[400px] gap-4",children:[(0,a.jsx)("p",{className:"text-destructive",children:$}),(0,a.jsxs)(d.$,{variant:"outline",onClick:et,children:[(0,a.jsx)(f.A,{className:"mr-2 h-4 w-4"}),"Try Again"]})]});let ec="asc"===G?v.A:b.A;return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4 p-4",children:[(0,a.jsx)("div",{className:"flex items-center gap-2",children:o.size>0&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(d.$,{variant:"outline",size:"sm",onClick:()=>X(!0),children:"Update Status"}),(0,a.jsx)(d.$,{variant:"outline",size:"sm",onClick:()=>W(!0),children:"Delete Selected"}),(0,a.jsxs)(d.$,{variant:"outline",size:"sm",onClick:()=>{let e=new Blob([[["Title","Status","Authors","Last Updated"],...i.filter(e=>o.has(e.id)).map(e=>[e.title,e.status,e.authors.map(e=>`${e.profile.firstName} ${e.profile.lastName}`).join(", "),new Date(e.updatedAt).toLocaleString()])].map(e=>e.map(e=>`"${e}"`).join(",")).join("\n")],{type:"text/csv"}),s=window.URL.createObjectURL(e),t=document.createElement("a");t.href=s,t.download="publications.csv",document.body.appendChild(t),t.click(),window.URL.revokeObjectURL(s),document.body.removeChild(t)},children:[(0,a.jsx)(y.A,{className:"mr-2 h-4 w-4"}),"Export Selected"]}),(0,a.jsxs)(R.E,{variant:"secondary",children:[o.size," selected"]})]})}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsxs)(d.$,{variant:"outline",size:"sm",onClick:et,children:[(0,a.jsx)(f.A,{className:"mr-2 h-4 w-4"}),"Refresh"]}),(0,a.jsxs)(E.rI,{children:[(0,a.jsx)(E.ty,{asChild:!0,children:(0,a.jsxs)(d.$,{variant:"outline",size:"sm",children:[(0,a.jsx)(n.A,{className:"mr-2 h-4 w-4"}),"View Options"]})}),(0,a.jsxs)(E.SQ,{align:"end",className:"w-[200px]",children:[(0,a.jsx)(E.lp,{children:"Sort By"}),(0,a.jsx)(E.mB,{}),(0,a.jsx)(E.hO,{checked:"title"===H,onCheckedChange:()=>ea("title"),children:"Title"}),(0,a.jsx)(E.hO,{checked:"status"===H,onCheckedChange:()=>ea("status"),children:"Status"}),(0,a.jsx)(E.hO,{checked:"updatedAt"===H,onCheckedChange:()=>ea("updatedAt"),children:"Last Updated"}),(0,a.jsx)(E.mB,{}),(0,a.jsx)(E.hO,{checked:"asc"===G,onCheckedChange:()=>Y("asc"===G?"desc":"asc"),children:"Ascending Order"})]})]})]})]}),(0,a.jsx)("div",{className:"relative w-full p-4",children:(0,a.jsx)("div",{className:"relative w-full overflow-auto",children:(0,a.jsxs)(k.XI,{children:[(0,a.jsx)(k.A0,{children:(0,a.jsxs)(k.Hj,{className:"hover:bg-transparent border-0",children:[(0,a.jsx)(k.nd,{className:"w-[40px] h-10",children:(0,a.jsx)(D.S,{checked:o.size===i.length&&i.length>0,onCheckedChange:()=>{o.size===i.length?h(new Set):h(new Set(i.map(e=>e.id)))},"aria-label":"Select all"})}),(0,a.jsxs)(k.nd,{className:"font-medium text-primary h-10 cursor-pointer",onClick:()=>ea("title"),children:["Title ","title"===H&&(0,a.jsx)(ec,{className:"inline-block ml-1 h-4 w-4"})]}),(0,a.jsx)(k.nd,{className:"font-medium text-primary h-10",children:"Authors"}),(0,a.jsxs)(k.nd,{className:"font-medium text-primary h-10 cursor-pointer",onClick:()=>ea("status"),children:["Status ","status"===H&&(0,a.jsx)(ec,{className:"inline-block ml-1 h-4 w-4"})]}),(0,a.jsxs)(k.nd,{className:"font-medium text-primary h-10 cursor-pointer",onClick:()=>ea("updatedAt"),children:["Last Updated ","updatedAt"===H&&(0,a.jsx)(ec,{className:"inline-block ml-1 h-4 w-4"})]}),(0,a.jsx)(k.nd,{className:"w-[100px] h-10",children:"Actions"})]})}),(0,a.jsx)(k.BF,{children:x?(0,a.jsx)(k.Hj,{children:(0,a.jsx)(k.nA,{colSpan:6,className:"h-24 text-center",children:(0,a.jsxs)("div",{className:"flex items-center justify-center",children:[(0,a.jsx)(f.A,{className:"mr-2 h-4 w-4 animate-spin"}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"Loading publications..."})]})})}):0===i.length?(0,a.jsx)(k.Hj,{children:(0,a.jsx)(k.nA,{colSpan:6,className:"h-24 text-center",children:(0,a.jsxs)("div",{className:"flex flex-col items-center justify-center",children:[(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"No publications found"}),e||"all"!==s?(0,a.jsx)("p",{className:"text-xs text-muted-foreground mt-1",children:"Try adjusting your filters"}):(0,a.jsx)(d.$,{variant:"link",className:"text-xs mt-2",onClick:()=>U(!0),children:"Create your first publication"})]})})}):i.map(e=>{let s=es[e.status].icon;return(0,a.jsxs)(k.Hj,{className:"group hover:bg-accent/5 data-[state=selected]:bg-accent/10",children:[(0,a.jsx)(k.nA,{className:"py-3",children:(0,a.jsx)(D.S,{checked:o.has(e.id),onCheckedChange:()=>er(e.id),"aria-label":`Select ${e.title}`})}),(0,a.jsx)(k.nA,{className:"py-3 font-medium",children:e.title}),(0,a.jsx)(k.nA,{className:"py-3",children:(0,a.jsx)("div",{className:"flex -space-x-2",children:e.authors.map((e,s)=>(0,a.jsxs)(P.eu,{className:"h-8 w-8 border-2 border-background transition-transform group-hover:translate-x-0 group-hover:scale-105",style:{transform:`translateX(${-4*s}px)`},children:[(0,a.jsx)(P.BK,{src:e.profile.photoUrl||"",alt:`${e.profile.firstName} ${e.profile.lastName}`}),(0,a.jsxs)(P.q5,{children:[e.profile.firstName[0],e.profile.lastName[0]]})]},s))})}),(0,a.jsx)(k.nA,{className:"py-3",children:(0,a.jsxs)(R.E,{variant:es[e.status].variant,className:"font-normal",children:[(0,a.jsx)(s,{className:"mr-1 h-3 w-3"}),es[e.status].label]})}),(0,a.jsx)(k.nA,{className:"py-3 text-muted-foreground",children:new Date(e.updatedAt).toLocaleDateString()}),(0,a.jsx)(k.nA,{className:"py-3",children:(0,a.jsxs)(E.rI,{children:[(0,a.jsx)(E.ty,{asChild:!0,children:(0,a.jsxs)(d.$,{variant:"ghost",className:"flex h-8 w-8 p-0 opacity-0 group-hover:opacity-100 transition-opacity",children:[(0,a.jsx)(w.A,{className:"h-4 w-4"}),(0,a.jsx)("span",{className:"sr-only",children:"Open menu"})]})}),(0,a.jsxs)(E.SQ,{align:"end",className:"w-[160px]",children:[(0,a.jsxs)(E._2,{onClick:()=>l.push(`/dashboard/publications/${e.id}`),children:[(0,a.jsx)(N.A,{className:"mr-2 h-4 w-4"}),"View"]}),(0,a.jsxs)(E._2,{onClick:()=>l.push(`/dashboard/publications/${e.id}/edit`),children:[(0,a.jsx)(C.A,{className:"mr-2 h-4 w-4"}),"Edit"]}),(0,a.jsx)(E.mB,{}),(0,a.jsxs)(E.lv,{children:[(0,a.jsxs)(E.nV,{children:[(0,a.jsx)(m.A,{className:"mr-2 h-4 w-4"}),"Set Status"]}),(0,a.jsxs)(E.M5,{children:[(0,a.jsxs)(E._2,{onClick:()=>en(e.id,"DRAFT"),children:[(0,a.jsx)(m.A,{className:"mr-2 h-4 w-4"}),"Draft"]}),(0,a.jsxs)(E._2,{onClick:()=>en(e.id,"PUBLISHED"),children:[(0,a.jsx)(j.A,{className:"mr-2 h-4 w-4"}),"Published"]}),(0,a.jsxs)(E._2,{onClick:()=>en(e.id,"ARCHIVED"),children:[(0,a.jsx)(g,{className:"mr-2 h-4 w-4"}),"Archived"]})]})]}),(0,a.jsx)(E.mB,{}),(0,a.jsxs)(E._2,{className:"text-destructive",onClick:()=>L(e.id),children:[(0,a.jsx)(A.A,{className:"mr-2 h-4 w-4"}),"Delete"]})]})]})})]},e.id)})})]})})}),(0,a.jsx)(J,{open:B,onOpenChange:U,onSuccess:et}),(0,a.jsx)(T.Lt,{open:!!q,onOpenChange:()=>L(null),children:(0,a.jsxs)(T.EO,{children:[(0,a.jsxs)(T.wd,{children:[(0,a.jsx)(T.r7,{children:"Are you sure?"}),(0,a.jsx)(T.$v,{children:"This action cannot be undone. This will permanently delete the publication and all its associated data."})]}),(0,a.jsxs)(T.ck,{children:[(0,a.jsx)(T.Zr,{children:"Cancel"}),(0,a.jsx)(T.Rx,{onClick:()=>q&&el([q]),disabled:F,className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:F?"Deleting...":"Delete"})]})]})}),(0,a.jsx)(T.Lt,{open:Z,onOpenChange:W,children:(0,a.jsxs)(T.EO,{children:[(0,a.jsxs)(T.wd,{children:[(0,a.jsx)(T.r7,{children:"Delete Selected Publications"}),(0,a.jsxs)(T.$v,{children:["Are you sure you want to delete ",o.size," selected publications? This action cannot be undone."]})]}),(0,a.jsxs)(T.ck,{children:[(0,a.jsx)(T.Zr,{children:"Cancel"}),(0,a.jsx)(T.Rx,{onClick:()=>el(Array.from(o)),disabled:F,className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:F?"Deleting...":"Delete Selected"})]})]})}),(0,a.jsx)(T.Lt,{open:Q,onOpenChange:X,children:(0,a.jsxs)(T.EO,{children:[(0,a.jsxs)(T.wd,{children:[(0,a.jsx)(T.r7,{children:"Update Publication Status"}),(0,a.jsxs)(T.$v,{children:["Update the status of ",o.size," selected publications."]})]}),(0,a.jsx)("div",{className:"py-4",children:(0,a.jsxs)(u.l6,{value:K,onValueChange:e=>ee(e),children:[(0,a.jsx)(u.bq,{children:(0,a.jsx)(u.yv,{placeholder:"Select new status"})}),(0,a.jsxs)(u.gC,{children:[(0,a.jsx)(u.eb,{value:"DRAFT",children:"Draft"}),(0,a.jsx)(u.eb,{value:"PUBLISHED",children:"Published"}),(0,a.jsx)(u.eb,{value:"ARCHIVED",children:"Archived"})]})]})}),(0,a.jsxs)(T.ck,{children:[(0,a.jsx)(T.Zr,{children:"Cancel"}),(0,a.jsx)(T.Rx,{onClick:ei,disabled:M,children:M?"Updating...":"Update Status"})]})]})})]})}function Y(){let[e,s]=(0,r.useState)(!1),[t,c]=(0,r.useState)(""),[p,m]=(0,r.useState)("all"),[j,g]=(0,r.useState)(0),[f,v]=(0,r.useState)(0);return(0,a.jsxs)("div",{className:"flex flex-col gap-8 p-8",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsx)("h1",{className:"text-3xl font-bold tracking-tight",children:"Publications"}),(0,a.jsx)("p",{className:"text-muted-foreground",children:"Create and manage your publications"})]}),(0,a.jsxs)(d.$,{onClick:()=>s(!0),children:[(0,a.jsx)(l.A,{className:"mr-2 h-4 w-4"}),"New Publication"]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[(0,a.jsxs)(x.Zp,{className:"md:col-span-2",children:[(0,a.jsxs)(x.aR,{children:[(0,a.jsx)(x.ZB,{children:"Search and Filter"}),(0,a.jsx)(x.BT,{children:"Find publications by title or filter by status."})]}),(0,a.jsx)(x.Wu,{children:(0,a.jsxs)("div",{className:"flex flex-col gap-4 md:flex-row md:items-center",children:[(0,a.jsx)("div",{className:"flex-1",children:(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(i.A,{className:"absolute left-2 top-2.5 h-4 w-4 text-muted-foreground"}),(0,a.jsx)(h.p,{placeholder:"Search publications...",className:"pl-8",value:t,onChange:e=>c(e.target.value)})]})}),(0,a.jsxs)(u.l6,{value:p,onValueChange:m,children:[(0,a.jsxs)(u.bq,{className:"w-full md:w-[200px]",children:[(0,a.jsx)(n.A,{className:"mr-2 h-4 w-4"}),(0,a.jsx)(u.yv,{placeholder:"All Status"})]}),(0,a.jsxs)(u.gC,{children:[(0,a.jsx)(u.eb,{value:"all",children:"All Status"}),(0,a.jsx)(u.eb,{value:"DRAFT",children:"Draft"}),(0,a.jsx)(u.eb,{value:"PUBLISHED",children:"Published"}),(0,a.jsx)(u.eb,{value:"ARCHIVED",children:"Archived"})]})]})]})})]}),(0,a.jsxs)(x.Zp,{children:[(0,a.jsxs)(x.aR,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,a.jsx)(x.ZB,{className:"text-sm font-medium",children:"Total Publications"}),(0,a.jsx)(o,{className:"h-4 w-4 text-muted-foreground"})]}),(0,a.jsxs)(x.Wu,{children:[(0,a.jsx)("div",{className:"text-2xl font-bold",children:f}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:"Publications in the system"})]})]})]}),(0,a.jsx)(x.Zp,{children:(0,a.jsx)(x.Wu,{className:"p-0",children:(0,a.jsx)(G,{searchQuery:t,statusFilter:p},j)})}),(0,a.jsx)(J,{open:e,onOpenChange:s,onSuccess:()=>{g(e=>e+1)}})]})}},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},15036:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(82614).A)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]])},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},33873:e=>{"use strict";e.exports=require("path")},38765:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(82614).A)("CircleCheck",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]])},40988:(e,s,t)=>{"use strict";t.d(s,{AM:()=>n,Wv:()=>c,hl:()=>o});var a=t(60687),r=t(43210),l=t(40599),i=t(4780);let n=l.bL,c=l.l9;l.Mz;let o=r.forwardRef(({className:e,align:s="center",sideOffset:t=4,...r},n)=>(0,a.jsx)(l.ZL,{children:(0,a.jsx)(l.UC,{ref:n,align:s,sideOffset:t,className:(0,i.cn)("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...r})}));o.displayName=l.UC.displayName},43765:(e,s,t)=>{Promise.resolve().then(t.bind(t,93089))},50389:(e,s,t)=>{Promise.resolve().then(t.bind(t,2661))},53623:(e,s,t)=>{"use strict";t.r(s),t.d(s,{GlobalError:()=>i.a,__next_app__:()=>h,pages:()=>d,routeModule:()=>u,tree:()=>o});var a=t(65239),r=t(48088),l=t(88170),i=t.n(l),n=t(30893),c={};for(let e in n)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(c[e]=()=>n[e]);t.d(s,c);let o={children:["",{children:["dashboard",{children:["publications",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,93089)),"/Users/pro/Dev/gmp/src/app/dashboard/publications/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,63144)),"/Users/pro/Dev/gmp/src/app/dashboard/layout.tsx"],metadata:{icon:[async e=>(await Promise.resolve().then(t.bind(t,70440))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(t.bind(t,61137)),"/Users/pro/Dev/gmp/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,57398,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(t.t.bind(t,89999,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(t.t.bind(t,65284,23)),"next/dist/client/components/unauthorized-error"],metadata:{icon:[async e=>(await Promise.resolve().then(t.bind(t,70440))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]}.children,d=["/Users/pro/Dev/gmp/src/app/dashboard/publications/page.tsx"],h={require:t,loadChunk:()=>Promise.resolve()},u=new a.AppPageRouteModule({definition:{kind:r.RouteKind.APP_PAGE,page:"/dashboard/publications/page",pathname:"/dashboard/publications",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:o}})},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},76311:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(82614).A)("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},79551:e=>{"use strict";e.exports=require("url")},93089:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>a});let a=(0,t(12907).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/Users/pro/Dev/gmp/src/app/dashboard/publications/page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/pro/Dev/gmp/src/app/dashboard/publications/page.tsx","default")}};var s=require("../../../webpack-runtime.js");s.C(e);var t=e=>s(s.s=e),a=s.X(0,[4447,163,5767,7210,6460,8749,9882,1758,2729,1726,6282,4030,3483,9752],()=>t(53623));module.exports=a})();